import{k as ce,n as Ne,j as e,B as g,i as Me,p as ye,m as se,o as _e,A as oe,q as Re,r as Ie,s as De,L as os}from"./index-BAAyN0wm.js";import{r as c,u as Ee,g as xs,e as Ue,f as W,L as he}from"./react-vendor-CaQki1kR.js";import{C as u,d as p,a as w,b,c as F}from"./card-VX4ullBD.js";import{S as D,a as E,b as U,c as O,d as l,B as H,D as we,e as Je,f as be,g as Se,h as Ce,i as Pe,j as Fe,T as Oe,k as $e,l as G,m as Y,n as ee,P as ms,I as hs}from"./profile-picture-viewer-CHEbzrCz.js";import{L as j,I as B}from"./label-BPjYTGLq.js";import{M as js,P as us,a as ps}from"./modern-property-card-CHcWK3I9.js";import{T as Xe}from"./textarea-BMEdPVmr.js";import{W as Le,q as Ve,m as gs,o as He,B as re,U as We,r as xe,s as vs,t as Ze,n as ue,u as me,v as Ns,p as es,a as Ge,X as Ye,j as _,e as ke,w as le,f as Te,c as fs,x as ys,D as pe,y as ws,z as bs,G as Ke,l as ss,J as Ae,P as as,K as Qe,S as Ss,M as Cs,N as Ps,O as ks}from"./ui-vendor-DU0NExUN.js";import{u as ts}from"./useApi-DPRJXdFr.js";function ns(){const[a,N]=c.useState([]),[o,C]=c.useState(!0),[f,x]=c.useState(null),[h,i]=c.useState(""),[t,S]=c.useState("all"),[M,y]=c.useState("all"),[k,P]=c.useState(null),[R,$]=c.useState(!1),[X,ae]=c.useState(!1),[V,J]=c.useState({status:"",assignedTo:"",message:""}),{toast:z}=ce();c.useEffect(()=>{q()},[]);const q=async()=>{try{C(!0),x(null);const n=await Ne.getManagerMaintenanceRequests();N(n)}catch(n){console.error("Error fetching maintenance requests:",n),x("Failed to load maintenance requests"),z({title:"Error",description:"Failed to load maintenance requests. Please try again.",variant:"destructive"})}finally{C(!1)}},Z=a.filter(n=>{const r=n.title.toLowerCase().includes(h.toLowerCase())||n.description.toLowerCase().includes(h.toLowerCase()),v=t==="all"||n.status===t,I=M==="all"||n.priority===M;return r&&v&&I}),ne=n=>{switch(n){case"completed":return e.jsx(ue,{className:"h-4 w-4 text-green-500"});case"in_progress":return e.jsx(me,{className:"h-4 w-4 text-blue-500"});case"pending":return e.jsx(He,{className:"h-4 w-4 text-yellow-500"});default:return e.jsx(Le,{className:"h-4 w-4 text-gray-500"})}},ie=n=>{switch(n){case"emergency":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},te=async()=>{if(k)try{await Ne.updateMaintenanceRequest(k.id,{status:V.status,assignedTo:V.assignedTo,managerNotes:V.message}),z({title:"Request Updated",description:"Maintenance request has been updated successfully."}),$(!1),J({status:"",assignedTo:"",message:""}),q()}catch(n){console.error("Error updating maintenance request:",n),z({title:"Error",description:n.message||"Failed to update maintenance request.",variant:"destructive"})}},d=async()=>{if(k)try{await Ne.updateMaintenanceRequest(k.id,{status:"in_progress",assignedTo:V.assignedTo,managerNotes:`Request assigned to ${V.assignedTo}`}),z({title:"Request Assigned",description:"Maintenance request has been assigned successfully."}),ae(!1),J({status:"",assignedTo:"",message:""}),q()}catch(n){console.error("Error assigning maintenance request:",n),z({title:"Error",description:n.message||"Failed to assign maintenance request.",variant:"destructive"})}},T=async n=>{try{await Ne.updateMaintenanceRequest(n,{status:"completed",managerNotes:"Maintenance request has been completed."}),z({title:"Request Completed",description:"Maintenance request has been marked as completed."}),q()}catch(r){console.error("Error completing maintenance request:",r),z({title:"Error",description:r.message||"Failed to complete maintenance request.",variant:"destructive"})}};return e.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Maintenance Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage tenant maintenance requests"})]}),e.jsxs(g,{onClick:q,variant:"outline",children:[e.jsx(Le,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),e.jsx(u,{children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(j,{htmlFor:"search",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ve,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(B,{id:"search",placeholder:"Search requests...",value:h,onChange:n=>i(n.target.value),className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"status",children:"Status"}),e.jsxs(D,{value:t,onValueChange:S,children:[e.jsx(E,{children:e.jsx(U,{placeholder:"All Statuses"})}),e.jsxs(O,{children:[e.jsx(l,{value:"all",children:"All Statuses"}),e.jsx(l,{value:"pending",children:"Pending"}),e.jsx(l,{value:"in_progress",children:"In Progress"}),e.jsx(l,{value:"completed",children:"Completed"}),e.jsx(l,{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"priority",children:"Priority"}),e.jsxs(D,{value:M,onValueChange:y,children:[e.jsx(E,{children:e.jsx(U,{placeholder:"All Priorities"})}),e.jsxs(O,{children:[e.jsx(l,{value:"all",children:"All Priorities"}),e.jsx(l,{value:"emergency",children:"Emergency"}),e.jsx(l,{value:"high",children:"High"}),e.jsx(l,{value:"medium",children:"Medium"}),e.jsx(l,{value:"low",children:"Low"})]})]})]})]})})}),e.jsx("div",{className:"space-y-4",children:o?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(gs,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading maintenance requests..."})]}):f?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(He,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Requests"}),e.jsx("p",{className:"text-gray-600 mb-4",children:f}),e.jsx(g,{onClick:q,children:"Try Again"})]}):Z.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Le,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Maintenance Requests"}),e.jsx("p",{className:"text-gray-600",children:"No maintenance requests found matching your criteria."})]}):Z.map(n=>{var r,v;return e.jsx(u,{className:"hover:shadow-md transition-shadow",children:e.jsxs(p,{className:"pt-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[ne(n.status),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:n.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:n.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(re,{className:"h-4 w-4 mr-1"}),n.propertyTitle||`Property ${(r=n.propertyId)==null?void 0:r.slice(-8)}`]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(We,{className:"h-4 w-4 mr-1"}),n.tenantFirstName&&n.tenantLastName?`${n.tenantFirstName} ${n.tenantLastName}`:`Tenant ${(v=n.tenantId)==null?void 0:v.slice(-8)}`]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(xe,{className:"h-4 w-4 mr-1"}),new Date(n.createdAt).toLocaleDateString()]})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[e.jsxs(H,{className:ie(n.priority),children:[n.priority," priority"]}),e.jsx(H,{variant:"outline",children:n.status.replace("_"," ")})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mb-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Category:"}),e.jsx("p",{className:"font-medium capitalize",children:n.category})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Assigned To:"}),e.jsx("p",{className:"font-medium",children:n.assignedTo||"Not assigned"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Scheduled:"}),e.jsx("p",{className:"font-medium",children:n.dateScheduled?new Date(n.dateScheduled).toLocaleDateString():"Not scheduled"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Completed:"}),e.jsx("p",{className:"font-medium",children:n.dateCompleted?new Date(n.dateCompleted).toLocaleDateString():"Not completed"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm mb-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 font-medium",children:"Property Details:"}),e.jsx("p",{className:"font-medium",children:n.propertyTitle||"Property Title N/A"}),e.jsx("p",{className:"text-gray-600 text-xs",children:n.propertyAddress&&n.propertyCity?`${n.propertyAddress}, ${n.propertyCity}`:"Address not available"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 font-medium",children:"Tenant Details:"}),e.jsx("p",{className:"font-medium",children:n.tenantFirstName&&n.tenantLastName?`${n.tenantFirstName} ${n.tenantLastName}`:"Tenant Name N/A"}),e.jsxs("p",{className:"text-gray-600 text-xs",children:[n.tenantEmail||"Email not available",n.tenantPhone&&` • ${n.tenantPhone}`]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:n.photos&&n.photos.length>0&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(vs,{className:"h-4 w-4 mr-1"}),n.photos.length," photo(s)"]})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(we,{open:R,onOpenChange:$,children:[e.jsx(Je,{asChild:!0,children:e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>{console.log("Opening update dialog for request:",n),P(n),J({status:n.status||"",assignedTo:n.assignedTo||"",message:""})},children:[e.jsx(Ze,{className:"h-4 w-4 mr-1"}),"Update"]})}),e.jsxs(be,{children:[e.jsxs(Se,{children:[e.jsx(Ce,{children:"Update Maintenance Request"}),e.jsx(Pe,{children:"Update the status and details of this maintenance request."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"status",children:"Status"}),e.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["Current status: ",V.status||"none"," | Selected request: ",(k==null?void 0:k.id)||"none"]}),e.jsxs(D,{value:V.status,onValueChange:I=>{console.log("Status changed to:",I),J(K=>({...K,status:I}))},children:[e.jsx(E,{className:"w-full",children:e.jsx(U,{placeholder:"Select status"})}),e.jsxs(O,{children:[e.jsx(l,{value:"pending",children:"Pending"}),e.jsx(l,{value:"in_progress",children:"In Progress"}),e.jsx(l,{value:"completed",children:"Completed"}),e.jsx(l,{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"assignedTo",children:"Assigned To"}),e.jsx(B,{id:"assignedTo",placeholder:"Technician name",value:V.assignedTo,onChange:I=>J(K=>({...K,assignedTo:I.target.value}))})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"message",children:"Update Message"}),e.jsx(Xe,{id:"message",placeholder:"Add an update message...",value:V.message,onChange:I=>J(K=>({...K,message:I.target.value}))})]})]}),e.jsxs(Fe,{children:[e.jsx(g,{variant:"outline",onClick:()=>$(!1),children:"Cancel"}),e.jsx(g,{onClick:te,children:"Update Request"})]})]})]}),e.jsxs(we,{open:X,onOpenChange:ae,children:[e.jsx(Je,{asChild:!0,children:e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>P(n),children:[e.jsx(We,{className:"h-4 w-4 mr-1"}),"Assign"]})}),e.jsxs(be,{children:[e.jsxs(Se,{children:[e.jsx(Ce,{children:"Assign Maintenance Request"}),e.jsx(Pe,{children:"Assign this maintenance request to a technician."})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(j,{htmlFor:"assignedTo",children:"Technician Name"}),e.jsx(B,{id:"assignedTo",placeholder:"Enter technician name",value:V.assignedTo,onChange:I=>J(K=>({...K,assignedTo:I.target.value}))})]})}),e.jsxs(Fe,{children:[e.jsx(g,{variant:"outline",onClick:()=>ae(!1),children:"Cancel"}),e.jsx(g,{onClick:d,children:"Assign Request"})]})]})]}),n.status!=="completed"&&e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>T(n.id),children:[e.jsx(ue,{className:"h-4 w-4 mr-1"}),"Complete"]})]})]})]})},n.id)})})]})}function Ts(){const{user:a}=Me(),{toast:N}=ce(),o=Ee(),[C,f]=c.useState("overview"),[x,h]=c.useState([]),[i,t]=c.useState([]),[S,M]=c.useState(!0),[y,k]=c.useState({email:"",role:"owner"}),[P,R]=c.useState(!1),[$,X]=c.useState([]),[ae,V]=c.useState(!1),[J,z]=c.useState(null),[q,Z]=c.useState(!1),[ne,ie]=c.useState([]),[te,d]=c.useState(!1),[T,n]=c.useState(!1),[r,v]=c.useState({email:"",role:"tenant"});c.useEffect(()=>{I(),K(),ze()},[]);const I=async()=>{try{M(!0);const s=await ye.getProperties(),m=s.filter(A=>A.status==="pending");h(s),t(m),console.log("Fetched properties:",s),console.log("Properties with owners:",s.filter(A=>A.owner))}catch(s){console.error("Error fetching dashboard data:",s),N({title:"Error",description:"Failed to load dashboard data",variant:"destructive"})}finally{M(!1)}},K=async()=>{try{V(!0);const s=await se.getInvitedUsers();console.log("Fetched users:",s),X(s)}catch(s){console.error("Failed to fetch invited users:",s),N({title:"Error",description:"Failed to load users. Please try again.",variant:"destructive"})}finally{V(!1)}},ze=async()=>{try{d(!0);const s=await _e.getManagerLeads();ie(s)}catch(s){console.error("Failed to fetch leads:",s),N({title:"Error",description:"Failed to load leads. Please try again.",variant:"destructive"})}finally{d(!1)}},ge={totalProperties:x.length,pendingReview:i.length,approvedProperties:x.filter(s=>s.status==="approved").length,rejectedProperties:x.filter(s=>s.status==="rejected").length},de=async(s,m)=>{try{await ye.updatePropertyStatus(s,m),N({title:"Property Updated",description:`Property has been ${m}.`,duration:1e3}),I(),q&&Z(!1)}catch(A){const Q=A instanceof oe?A.message:`Failed to ${m} property. Please try again.`;N({title:"Error",description:Q,variant:"destructive",duration:6e3})}},ve=s=>{z(s),Z(!0)},rs=async(s,m)=>{try{await _e.updateLeadStatus(s,m),N({title:"Lead Updated",description:`Lead status updated to ${m}.`}),ze()}catch(A){console.error("Failed to update lead status:",A),N({title:"Error",description:"Failed to update lead status. Please try again.",variant:"destructive"})}},is=s=>{v({email:s.tenantEmail,role:"tenant"}),n(!0)},ls=async()=>{if(!r.email.trim()){N({title:"Error",description:"Please enter an email address.",variant:"destructive"});return}try{R(!0);const s=await se.invite({email:r.email,role:r.role});N({title:"Invitation Sent",description:`Invitation sent to ${r.email}.`}),console.log("Invitation URL:",s==null?void 0:s.inviteUrl),n(!1),v({email:"",role:"tenant"}),K()}catch(s){const m=s instanceof oe?s.message:"Failed to send invitation. Please try again.";N({title:"Invitation Failed",description:m,variant:"destructive"})}finally{R(!1)}},qe=async(s,m)=>{try{await se.updateUserStatus(s,m),N({title:"User Status Updated",description:`User has been ${m?"enabled":"disabled"}.`,duration:4e3}),K()}catch(A){const Q=A instanceof oe?A.message:`Failed to ${m?"enable":"disable"} user. Please try again.`;N({title:"Error",description:Q,variant:"destructive",duration:6e3})}},cs=async()=>{if(!y.email.trim()){N({title:"Error",description:"Please enter an email address.",variant:"destructive",duration:4e3});return}R(!0);try{await se.invite({email:y.email.trim(),role:y.role}),N({title:"Invitation Sent",description:`Invitation sent to ${y.email} as ${y.role}.`,duration:5e3}),k({email:"",role:"owner"}),K()}catch(s){const m=s instanceof oe?s.message:"Failed to send invitation. Please try again.";N({title:"Error",description:m,variant:"destructive",duration:6e3})}finally{R(!1)}};return S?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"text-lg",children:"Loading dashboard..."})})}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold",children:["Welcome back, ",a==null?void 0:a.firstName," ",a==null?void 0:a.lastName,"!"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Here's your property management overview."})]}),e.jsxs(Oe,{value:C,onValueChange:f,className:"space-y-4",children:[e.jsxs($e,{children:[e.jsx(G,{value:"overview",children:"Overview"}),e.jsx(G,{value:"properties",children:"Properties"}),e.jsx(G,{value:"owner-properties",children:"Owner Properties"}),e.jsx(G,{value:"leads",children:"Leads"}),e.jsx(G,{value:"maintenance",children:"Maintenance"}),e.jsx(G,{value:"my-users",children:"My Users"}),e.jsx(G,{value:"user-management",children:"User Management"})]}),e.jsxs(Y,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(u,{className:"cursor-pointer hover:shadow-lg dark:hover:shadow-xl dark:hover:shadow-black/50 transition-all hover:border-primary/50 dark:hover:border-primary/30 dark:hover:bg-card/80",onClick:()=>{f("properties")},children:[e.jsxs(w,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(b,{className:"text-sm font-medium",children:"Total Properties"}),e.jsx(re,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(p,{children:[e.jsx("div",{className:"text-2xl font-bold",children:ge.totalProperties}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All registered properties"})]})]}),e.jsxs(u,{className:"cursor-pointer hover:shadow-lg dark:hover:shadow-xl dark:hover:shadow-black/50 transition-all hover:border-primary/50 dark:hover:border-primary/30 dark:hover:bg-card/80",onClick:()=>{o("/dashboard/properties?status=pending")},children:[e.jsxs(w,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(b,{className:"text-sm font-medium",children:"Pending Review"}),e.jsx(me,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(p,{children:[e.jsx("div",{className:"text-2xl font-bold",children:ge.pendingReview}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting approval"})]})]}),e.jsxs(u,{className:"cursor-pointer hover:shadow-lg dark:hover:shadow-xl dark:hover:shadow-black/50 transition-all hover:border-primary/50 dark:hover:border-primary/30 dark:hover:bg-card/80",onClick:()=>{o("/dashboard/properties?status=approved")},children:[e.jsxs(w,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(b,{className:"text-sm font-medium",children:"Approved"}),e.jsx(Ns,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(p,{children:[e.jsx("div",{className:"text-2xl font-bold",children:ge.approvedProperties}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active properties"})]})]}),e.jsxs(u,{className:"cursor-pointer hover:shadow-lg dark:hover:shadow-xl dark:hover:shadow-black/50 transition-all hover:border-primary/50 dark:hover:border-primary/30 dark:hover:bg-card/80",onClick:()=>{o("/dashboard/properties?status=rejected")},children:[e.jsxs(w,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(b,{className:"text-sm font-medium",children:"Rejected"}),e.jsx(es,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(p,{children:[e.jsx("div",{className:"text-2xl font-bold",children:ge.rejectedProperties}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Rejected submissions"})]})]})]}),e.jsxs(u,{children:[e.jsxs(w,{children:[e.jsx(b,{children:"Recent Property Submissions"}),e.jsx(F,{children:"Latest properties submitted for review"})]}),e.jsx(p,{children:e.jsxs("div",{className:"space-y-4",children:[i.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg cursor-pointer hover:shadow-md dark:hover:shadow-lg dark:hover:shadow-black/50 transition-all hover:bg-gray-50 dark:hover:bg-gray-800/50",onClick:()=>ve(s),children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(re,{className:"h-8 w-8 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium dark:text-gray-100",children:s.title}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.addressLine1,", ",s.city]}),s.owner&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Owner: ",s.owner.firstName," ",s.owner.lastName]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",onClick:m=>m.stopPropagation(),children:[e.jsxs(H,{variant:"secondary",children:[e.jsx(me,{className:"h-3 w-3 mr-1"}),"Pending"]}),e.jsx(g,{size:"sm",variant:"outline",onClick:()=>ve(s),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50 dark:text-blue-400 dark:hover:text-blue-300 dark:hover:bg-blue-900/20",children:"View Details"}),e.jsx(g,{size:"sm",variant:"outline",onClick:()=>de(s.id,"approved"),className:"text-green-600 hover:text-green-700 hover:bg-green-50",children:e.jsx(Ge,{className:"h-4 w-4"})}),e.jsx(g,{size:"sm",variant:"outline",onClick:()=>de(s.id,"rejected"),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(Ye,{className:"h-4 w-4"})})]})]},s.id)),i.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No pending properties"})]})})]})]}),e.jsxs(Y,{value:"properties",className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(s=>e.jsx(js,{property:s,onViewDetails:m=>{z(m),Z(!0)}},s.id))}),x.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(re,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No properties found"}),e.jsx("p",{className:"text-gray-600",children:"Properties will appear here once submitted by owners."})]})]}),e.jsx(Y,{value:"owner-properties",className:"space-y-4",children:(()=>{const s=x.reduce((A,Q)=>{if(Q.owner){const L=Q.owner.id;A[L]||(A[L]={owner:Q.owner,properties:[]}),A[L].properties.push(Q)}return A},{}),m=Object.values(s);return m.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(_,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No owners found"}),e.jsx("p",{className:"text-gray-600",children:"Property owners will appear here once they submit properties."})]}):e.jsx("div",{className:"space-y-6",children:m.map(({owner:A,properties:Q})=>e.jsxs(u,{children:[e.jsx(w,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(_,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs(b,{className:"text-lg",children:[A.firstName," ",A.lastName]}),e.jsx(F,{children:A.email})]})]}),e.jsxs(H,{variant:"secondary",children:[Q.length," ",Q.length===1?"Property":"Properties"]})]})}),e.jsx(p,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Q.map(L=>{var Be;return e.jsxs(u,{className:"border-l-4 border-l-blue-500 cursor-pointer hover:shadow-lg dark:hover:shadow-xl dark:hover:shadow-black/50 transition-all",onClick:()=>ve(L),children:[e.jsxs(w,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{className:"text-sm font-medium dark:text-card-foreground",children:L.title}),e.jsxs(H,{variant:L.status==="approved"?"default":L.status==="rejected"?"destructive":"secondary",children:[L.status==="pending"&&e.jsx(me,{className:"h-3 w-3 mr-1"}),L.status.charAt(0).toUpperCase()+L.status.slice(1)]})]}),e.jsxs(F,{className:"flex items-center",children:[e.jsx(ke,{className:"h-3 w-3 mr-1"}),L.addressLine1,", ",L.city]})]}),e.jsxs(p,{className:"pt-0",children:[e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),e.jsx("span",{className:"capitalize dark:text-gray-300",children:L.type})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Submitted:"}),e.jsx("span",{className:"dark:text-gray-300",children:new Date(L.createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Photos:"}),e.jsx("span",{className:"dark:text-gray-300",children:((Be=L.photos)==null?void 0:Be.length)||0})]})]}),e.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t dark:border-gray-700",onClick:ds=>ds.stopPropagation(),children:[e.jsx(g,{size:"sm",variant:"outline",onClick:()=>ve(L),className:"flex-1 text-xs",children:"View Details"}),L.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs(g,{size:"sm",onClick:()=>de(L.id,"approved"),className:"flex-1 bg-green-600 hover:bg-green-700 text-xs",children:[e.jsx(Ge,{className:"h-3 w-3 mr-1"}),"Approve"]}),e.jsxs(g,{size:"sm",variant:"destructive",onClick:()=>de(L.id,"rejected"),className:"flex-1 text-xs",children:[e.jsx(Ye,{className:"h-3 w-3 mr-1"}),"Reject"]})]})]})]})]},L.id)})})})]},A.id))})})()}),e.jsx(Y,{value:"my-users",className:"space-y-4",children:ae?e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"text-lg",children:"Loading users..."})}):e.jsxs("div",{className:"space-y-6",children:[(()=>{const s=$.filter(m=>m.role==="owner");return s.length>0?e.jsxs(u,{children:[e.jsxs(w,{children:[e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5"}),"Property Owners (",s.length,")"]}),e.jsx(F,{children:"Owners you have invited to the platform"})]}),e.jsx(p,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(m=>e.jsxs(u,{className:"border-l-4 border-l-green-500",children:[e.jsxs(w,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(b,{className:"text-sm font-medium",children:[m.firstName," ",m.lastName]}),e.jsx(H,{variant:"default",children:"Owner"})]}),e.jsx(F,{children:m.email})]}),e.jsx(p,{className:"pt-0",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Properties:"}),e.jsx("span",{children:m.propertyCount})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Joined:"}),e.jsx("span",{children:new Date(m.createdAt).toLocaleDateString()})]})]})})]},m.id))})})]}):null})(),(()=>{const s=$.filter(m=>m.role==="tenant");return s.length>0?e.jsxs(u,{children:[e.jsxs(w,{children:[e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5"}),"Tenants (",s.length,")"]}),e.jsx(F,{children:"Tenants you have invited to the platform"})]}),e.jsx(p,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(m=>e.jsxs(u,{className:"border-l-4 border-l-purple-500",children:[e.jsxs(w,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(b,{className:"text-sm font-medium",children:[m.firstName," ",m.lastName]}),e.jsx(H,{variant:"secondary",children:"Tenant"})]}),e.jsx(F,{children:m.email})]}),e.jsx(p,{className:"pt-0",children:e.jsx("div",{className:"space-y-2 text-sm",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Joined:"}),e.jsx("span",{children:new Date(m.createdAt).toLocaleDateString()})]})})})]},m.id))})})]}):null})(),$.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(_,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No users invited yet"}),e.jsx("p",{className:"text-gray-600",children:"Users you invite will appear here. Use the User Management tab to send invitations."})]})]})}),e.jsx(Y,{value:"user-management",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(u,{children:[e.jsxs(w,{children:[e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-5 w-5"}),"Invite Users"]}),e.jsx(F,{children:"Send invitations to property owners and tenants"})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"inviteEmail",children:"Email Address"}),e.jsx(B,{id:"inviteEmail",type:"email",placeholder:"Enter email address",value:y.email,onChange:s=>k(m=>({...m,email:s.target.value})),disabled:P})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"inviteRole",children:"Role"}),e.jsxs(D,{value:y.role,onValueChange:s=>k(m=>({...m,role:s})),disabled:P,children:[e.jsx(E,{children:e.jsx(U,{placeholder:"Select role"})}),e.jsxs(O,{children:[e.jsx(l,{value:"owner",children:"Property Owner"}),e.jsx(l,{value:"tenant",children:"Tenant"})]})]})]}),e.jsxs(g,{onClick:cs,disabled:P||!y.email.trim(),className:"w-full",children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),P?"Sending Invitation...":"Send Invitation"]})]})]}),e.jsxs(u,{children:[e.jsxs(w,{children:[e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5"}),"Manage Users"]}),e.jsx(F,{children:"Control user access and permissions"})]}),e.jsxs(p,{children:[ae?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-sm text-gray-500",children:"Loading users..."})}):$.length>0?e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:$.map(s=>(console.log(`User ${s.firstName} ${s.lastName} - isActive:`,s.isActive),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`h-8 w-8 rounded-full flex items-center justify-center ${s.role==="owner"?"bg-blue-100":"bg-purple-100"}`,children:e.jsx(_,{className:`h-4 w-4 ${s.role==="owner"?"text-blue-600":"text-purple-600"}`})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-sm",children:[s.firstName," ",s.lastName]}),e.jsx("p",{className:"text-xs text-gray-500",children:s.email}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(H,{variant:s.role==="owner"?"default":"secondary",className:"text-xs",children:s.role}),s.role==="owner"&&e.jsxs("span",{className:"text-xs text-gray-500",children:[s.propertyCount," properties"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[e.jsx("input",{type:"radio",name:`user-${s.id}`,checked:s.isActive,onChange:()=>qe(s.id,!0),className:"text-green-600"}),e.jsx(fs,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-xs text-green-600",children:"Enable"})]})}),e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[e.jsx("input",{type:"radio",name:`user-${s.id}`,checked:!s.isActive,onChange:()=>qe(s.id,!1),className:"text-red-600"}),e.jsx(ys,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-xs text-red-600",children:"Disable"})]})})]})]},s.id)))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(_,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No users found"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Invited users will appear here"})]}),e.jsxs("div",{className:"border-t pt-4 mt-6",children:[e.jsx("h4",{className:"font-medium mb-2 text-sm",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(g,{size:"sm",variant:"outline",onClick:()=>k({email:"",role:"owner"}),disabled:P,className:"text-xs",children:[e.jsx(le,{className:"h-3 w-3 mr-1"}),"Invite Owner"]}),e.jsxs(g,{size:"sm",variant:"outline",onClick:()=>k({email:"",role:"tenant"}),disabled:P,className:"text-xs",children:[e.jsx(le,{className:"h-3 w-3 mr-1"}),"Invite Tenant"]})]})]})]})]})]})}),e.jsx(Y,{value:"leads",className:"space-y-4",children:e.jsxs(u,{children:[e.jsxs(w,{children:[e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5"}),"Property Leads"]}),e.jsx(F,{children:"Manage tenant inquiries and leads from your properties"})]}),e.jsx(p,{children:te?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Loading leads..."})]}):ne.length>0?e.jsx("div",{className:"space-y-4",children:ne.map(s=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-lg text-gray-900 dark:text-gray-100",children:s.tenantName}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.tenantEmail," • ",s.tenantPhone]})]}),e.jsx(H,{variant:s.status==="new"?"secondary":s.status==="contacted"||s.status==="qualified"||s.status==="converted"?"default":"outline",className:"text-xs",children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-md p-3 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(re,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:s.propertyTitle})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(ke,{className:"h-3 w-3"}),e.jsxs("span",{children:[s.propertyAddress,", ",s.propertyCity]})]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:[s.propertyType," • Owner: ",s.ownerFirstName," ",s.ownerLastName]})]}),(s.moveInDate||s.monthlyBudget||s.occupants!==void 0||s.hasPets!==void 0)&&e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-md p-3 mb-3",children:[e.jsx("h5",{className:"font-medium text-green-900 dark:text-green-100 mb-2 text-sm",children:"Rental Preferences"}),e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[s.moveInDate&&e.jsxs("div",{className:"text-center",children:[e.jsx(xe,{className:"h-4 w-4 text-green-600 mx-auto mb-1"}),e.jsx("p",{className:"text-xs text-green-600 font-medium",children:"Move-in"}),e.jsx("p",{className:"text-xs text-green-800 dark:text-green-200",children:new Date(s.moveInDate).toLocaleDateString()})]}),s.monthlyBudget&&e.jsxs("div",{className:"text-center",children:[e.jsx(pe,{className:"h-4 w-4 text-green-600 mx-auto mb-1"}),e.jsx("p",{className:"text-xs text-green-600 font-medium",children:"Budget"}),e.jsxs("p",{className:"text-xs text-green-800 dark:text-green-200",children:["$",s.monthlyBudget,"/mo"]})]}),s.occupants!==void 0&&e.jsxs("div",{className:"text-center",children:[e.jsx(_,{className:"h-4 w-4 text-green-600 mx-auto mb-1"}),e.jsx("p",{className:"text-xs text-green-600 font-medium",children:"Occupants"}),e.jsx("p",{className:"text-xs text-green-800 dark:text-green-200",children:s.occupants})]}),s.hasPets!==void 0&&e.jsxs("div",{className:"text-center",children:[e.jsx(ws,{className:"h-4 w-4 text-green-600 mx-auto mb-1"}),e.jsx("p",{className:"text-xs text-green-600 font-medium",children:"Pets"}),e.jsx("p",{className:"text-xs text-green-800 dark:text-green-200",children:s.hasPets?"Yes":"No"})]})]})]}),s.message&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-md p-3 mb-3",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-1",children:"Message:"}),e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:s.message})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:["Submitted: ",new Date(s.createdAt).toLocaleDateString()]}),e.jsxs("span",{children:["Source: ",s.source]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(D,{value:s.status,onValueChange:m=>rs(s.id,m),children:[e.jsx(E,{className:"w-32 h-8",children:e.jsx(U,{})}),e.jsxs(O,{children:[e.jsx(l,{value:"new",children:"New"}),e.jsx(l,{value:"contacted",children:"Contacted"}),e.jsx(l,{value:"qualified",children:"Qualified"}),e.jsx(l,{value:"converted",children:"Converted"}),e.jsx(l,{value:"closed",children:"Closed"})]})]}),e.jsxs(g,{size:"sm",onClick:()=>is(s),className:"bg-orange-500 hover:bg-orange-600 text-white h-8 px-3",children:[e.jsx(le,{className:"h-3 w-3 mr-1"}),"Invite"]})]})]})]},s.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(_,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"No leads yet"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Tenant inquiries from your properties will appear here"})]})})]})}),e.jsx(Y,{value:"maintenance",className:"space-y-4",children:e.jsx(ns,{})})]}),e.jsx(us,{property:J,open:q,onOpenChange:Z,onApprove:s=>de(s,"approved"),onReject:s=>de(s,"rejected"),showActions:!0}),e.jsx(we,{open:T,onOpenChange:n,children:e.jsxs(be,{children:[e.jsxs(Se,{children:[e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-5 w-5"})," Invite Tenant"]}),e.jsx(Pe,{children:"Send an invitation to this lead to join as a tenant."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"inviteEmailModal",children:"Email Address"}),e.jsx(B,{id:"inviteEmailModal",type:"email",placeholder:"Enter email address",value:r.email,onChange:s=>v(m=>({...m,email:s.target.value})),disabled:P})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"inviteRoleModal",children:"Role"}),e.jsxs(D,{value:r.role,onValueChange:s=>v(m=>({...m,role:s})),disabled:P,children:[e.jsx(E,{children:e.jsx(U,{placeholder:"Select role"})}),e.jsxs(O,{children:[e.jsx(l,{value:"tenant",children:"Tenant"}),e.jsx(l,{value:"owner",children:"Property Owner"})]})]})]})]}),e.jsx(Fe,{children:e.jsx(g,{onClick:ls,disabled:P,children:P?"Sending...":"Send Invite"})})]})})]})}function As(){const[a,N]=xs(),[o,C]=c.useState([]),[f,x]=c.useState(!0),[h,i]=c.useState(null),[t,S]=c.useState(!1),[M,y]=c.useState(""),[k,P]=c.useState(!1),[R,$]=c.useState("all"),[X,ae]=c.useState("all"),[V,J]=c.useState([]);Me();const{toast:z}=ce(),q=d=>{i(d),S(!0)},Z=d=>{S(d),d||(i(null),y(""))};c.useEffect(()=>{const d=a.get("status");d&&["all","pending","approved","rejected"].includes(d)?$(d):d||$("all")},[a]);const ne=d=>{$(d),d==="all"?N({},{replace:!0}):N({status:d},{replace:!0})};c.useEffect(()=>{ie()},[R,X]);const ie=async()=>{x(!0);try{const d=await ye.getProperties();console.log("All properties fetched:",d.length),console.log("Properties by status:",d.reduce((r,v)=>(r[v.status]=(r[v.status]||0)+1,r),{}));let T;R==="all"?(T=d,console.log("Showing all properties:",T.length)):(T=d.filter(r=>r.status===R),console.log(`Showing ${R} properties:`,T.length)),X!=="all"&&(T=T.filter(r=>r.ownerId===X),console.log(`Filtered by owner ${X}:`,T.length));const n=d.filter(r=>r.owner).reduce((r,v)=>(v.owner&&!r.find(I=>I.id===v.owner.id)&&r.push({id:v.owner.id,name:`${v.owner.firstName} ${v.owner.lastName}`}),r),[]);J(n),C(T)}catch(d){console.error("Error fetching properties:",d),z({title:"Error",description:"Failed to load properties",variant:"destructive"})}finally{x(!1)}},te=async(d,T)=>{P(!0);try{await ye.updatePropertyStatus(d,T,M),z({title:"Property Updated",description:`Property has been ${T}`}),C(n=>n.filter(r=>r.id!==d)),i(null),y(""),S(!1)}catch{z({title:"Error",description:"Failed to update property status",variant:"destructive"})}finally{P(!1)}};return f?e.jsx("div",{className:"flex justify-center py-8",children:"Loading pending properties..."}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Property Review"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Review and manage property submissions"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(bs,{className:"h-5 w-5 text-gray-500"}),e.jsxs(D,{value:R,onValueChange:ne,children:[e.jsx(E,{className:"w-48",children:e.jsx(U,{placeholder:"Filter by status"})}),e.jsxs(O,{children:[e.jsx(l,{value:"pending",children:"Pending Review"}),e.jsx(l,{value:"approved",children:"Approved"}),e.jsx(l,{value:"rejected",children:"Rejected"}),e.jsx(l,{value:"all",children:"All Properties"})]})]})]})}),o.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(me,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:["No ",R==="all"?"":R," properties"]}),e.jsx("p",{className:"text-gray-600",children:R==="pending"?"All properties have been reviewed.":`No properties found with status: ${R}`})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(d=>{var T,n;return e.jsxs(u,{className:"hover:shadow-lg dark:hover:shadow-xl dark:hover:shadow-black/50 transition-all cursor-pointer overflow-hidden",onClick:()=>q(d),children:[e.jsxs("div",{className:"relative",children:[e.jsx(ps,{photos:d.photos,propertyTitle:d.title,aspectRatio:"video",showControls:!0,showIndicators:!0,className:"h-48"}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsxs(H,{variant:d.status==="approved"?"default":d.status==="rejected"?"destructive":"secondary",children:[d.status==="pending"&&e.jsx(me,{className:"h-3 w-3 mr-1"}),d.status==="approved"&&e.jsx(ue,{className:"h-3 w-3 mr-1"}),d.status==="rejected"&&e.jsx(Ke,{className:"h-3 w-3 mr-1"}),d.status.charAt(0).toUpperCase()+d.status.slice(1)]})})]}),e.jsx(w,{children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{children:[e.jsx(b,{className:"text-lg dark:text-card-foreground",children:d.title}),e.jsxs(F,{className:"flex items-center mt-1",children:[e.jsx(ke,{className:"h-4 w-4 mr-1"}),d.addressLine1,", ",d.city]})]})})}),e.jsx(p,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),e.jsx("span",{className:"capitalize dark:text-gray-300",children:d.type})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Submitted:"}),e.jsx("span",{className:"dark:text-gray-300",children:new Date(d.createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Photos:"}),e.jsxs("span",{className:"dark:text-gray-300",children:[((T=d.photos)==null?void 0:T.length)||0," ",((n=d.photos)==null?void 0:n.length)===0&&"(Using placeholders)"]})]}),d.description&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Description:"}),e.jsx("p",{className:"mt-1 text-gray-800 dark:text-gray-300 line-clamp-2",children:d.description})]}),e.jsx("div",{className:"flex gap-2 pt-2",onClick:r=>r.stopPropagation(),children:e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>q(d),children:[e.jsx(ss,{className:"h-4 w-4 mr-1"}),"Review"]})})]})})]},d.id)})}),e.jsx(we,{open:t,onOpenChange:Z,children:e.jsxs(be,{className:"max-w-2xl",children:[e.jsxs(Se,{children:[e.jsxs(Ce,{children:["Review Property: ",(h==null?void 0:h.title)||""]}),e.jsx(Pe,{children:"Review the property details and approve or reject the submission."})]}),h&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{className:"text-sm font-medium",children:"Property Type"}),e.jsx("p",{className:"capitalize",children:h.type})]}),e.jsxs("div",{children:[e.jsx(j,{className:"text-sm font-medium",children:"Status"}),e.jsx(H,{variant:"secondary",children:h.status})]})]}),e.jsxs("div",{children:[e.jsx(j,{className:"text-sm font-medium",children:"Address"}),e.jsx("p",{children:h.addressLine1}),h.addressLine2&&e.jsx("p",{children:h.addressLine2}),e.jsxs("p",{children:[h.city,", ",h.state," ",h.zipcode]}),e.jsx("p",{children:h.country})]}),h.description&&e.jsxs("div",{children:[e.jsx(j,{className:"text-sm font-medium",children:"Description"}),e.jsx("p",{className:"text-gray-700",children:h.description})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"comment",children:"Review Comment (Optional)"}),e.jsx(Xe,{id:"comment",placeholder:"Add a comment about your decision...",value:M,onChange:d=>y(d.target.value),className:"mt-1"})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsxs(g,{onClick:()=>te(h.id,"approved"),disabled:k,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(ue,{className:"h-4 w-4 mr-2"}),"Approve"]}),e.jsxs(g,{variant:"destructive",onClick:()=>te(h.id,"rejected"),disabled:k,children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Reject"]})]})]})]})})]})}const fe=[{id:1,name:"John Smith",email:"john.smith@email.com",phone:"(555) 123-4567",property:"Oak Street Apartments",unit:"2B",rent:1850,leaseStart:"2023-09-16",leaseEnd:"2024-12-31",status:"active",paymentStatus:"current"},{id:2,name:"Sarah Johnson",email:"sarah.j@email.com",phone:"(555) 987-6543",property:"Pine View Complex",unit:"1A",rent:1650,leaseStart:"2023-08-01",leaseEnd:"2024-07-31",status:"active",paymentStatus:"overdue"},{id:3,name:"Mike Davis",email:"mike.davis@email.com",phone:"(555) 456-7890",property:"Maple Heights",unit:"3C",rent:2100,leaseStart:"2023-10-01",leaseEnd:"2024-09-30",status:"active",paymentStatus:"current"}];function Ls(){const[a,N]=c.useState(""),[o,C]=c.useState("all"),[f,x]=c.useState("all"),h=fe.filter(t=>{const S=t.name.toLowerCase().includes(a.toLowerCase())||t.email.toLowerCase().includes(a.toLowerCase())||t.property.toLowerCase().includes(a.toLowerCase()),M=o==="all"||t.status===o,y=f==="all"||t.paymentStatus===f;return S&&M&&y}),i=t=>{switch(t){case"current":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"overdue":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"late":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Tenants"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your tenant relationships"})]}),e.jsx(he,{to:"/dashboard/tenants/new",children:e.jsxs(g,{className:"bg-ondo-orange hover:bg-ondo-red transition-colors",children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Add Tenant"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx(u,{children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Tenants"}),e.jsx("p",{className:"text-2xl font-bold",children:fe.length})]}),e.jsx(_,{className:"h-8 w-8 text-blue-500"})]})})}),e.jsx(u,{children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Current Payments"}),e.jsx("p",{className:"text-2xl font-bold",children:fe.filter(t=>t.paymentStatus==="current").length})]}),e.jsx(pe,{className:"h-8 w-8 text-green-500"})]})})}),e.jsx(u,{children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Overdue Payments"}),e.jsx("p",{className:"text-2xl font-bold",children:fe.filter(t=>t.paymentStatus==="overdue").length})]}),e.jsx(es,{className:"h-8 w-8 text-red-500"})]})})}),e.jsx(u,{children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Expiring Leases"}),e.jsx("p",{className:"text-2xl font-bold",children:"2"})]}),e.jsx(xe,{className:"h-8 w-8 text-orange-500"})]})})})]}),e.jsx(u,{className:"mb-6",children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ve,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(B,{placeholder:"Search tenants...",value:a,onChange:t=>N(t.target.value),className:"pl-10"})]}),e.jsxs(D,{value:o,onValueChange:C,children:[e.jsx(E,{className:"w-48",children:e.jsx(U,{placeholder:"All Statuses"})}),e.jsxs(O,{children:[e.jsx(l,{value:"all",children:"All Statuses"}),e.jsx(l,{value:"active",children:"Active"}),e.jsx(l,{value:"pending",children:"Pending"}),e.jsx(l,{value:"terminated",children:"Terminated"})]})]}),e.jsxs(D,{value:f,onValueChange:x,children:[e.jsx(E,{className:"w-48",children:e.jsx(U,{placeholder:"Payment Status"})}),e.jsxs(O,{children:[e.jsx(l,{value:"all",children:"All Payments"}),e.jsx(l,{value:"current",children:"Current"}),e.jsx(l,{value:"overdue",children:"Overdue"}),e.jsx(l,{value:"late",children:"Late"})]})]})]})})}),e.jsx("div",{className:"space-y-4",children:h.map(t=>e.jsx(u,{className:"hover:shadow-lg transition-shadow",children:e.jsxs(p,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(Re,{className:"h-12 w-12",children:[e.jsx(Ie,{src:`/placeholder-avatar-${t.id}.jpg`}),e.jsx(De,{children:t.name.split(" ").map(S=>S[0]).join("")})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:t.name}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Te,{className:"h-4 w-4"}),e.jsx("span",{children:t.email})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(as,{className:"h-4 w-4"}),e.jsx("span",{children:t.phone})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx(H,{className:i(t.paymentStatus),children:t.paymentStatus}),e.jsx(H,{variant:"outline",className:"ml-2",children:t.status})]}),e.jsx(g,{variant:"outline",size:"sm",children:"View Details"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6 pt-6 border-t",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500 mb-1",children:[e.jsx(ke,{className:"h-4 w-4"}),e.jsx("span",{children:"Property"})]}),e.jsx("p",{className:"font-medium",children:t.property}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Unit ",t.unit]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500 mb-1",children:[e.jsx(pe,{className:"h-4 w-4"}),e.jsx("span",{children:"Monthly Rent"})]}),e.jsxs("p",{className:"font-medium",children:["$",t.rent]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500 mb-1",children:[e.jsx(xe,{className:"h-4 w-4"}),e.jsx("span",{children:"Lease Start"})]}),e.jsx("p",{className:"font-medium",children:t.leaseStart})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500 mb-1",children:[e.jsx(xe,{className:"h-4 w-4"}),e.jsx("span",{children:"Lease End"})]}),e.jsx("p",{className:"font-medium",children:t.leaseEnd})]})]})]})},t.id))}),h.length===0&&e.jsx(u,{children:e.jsxs(p,{className:"text-center py-8",children:[e.jsx(_,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No tenants found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:a||o!=="all"||f!=="all"?"Try adjusting your filters":"No tenants have been added yet"}),e.jsx(he,{to:"/dashboard/tenants/new",children:e.jsxs(g,{className:"bg-ondo-orange hover:bg-ondo-red transition-colors",children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Add First Tenant"]})})]})})]})}function Fs(){const a=Ee(),{toast:N}=ce(),{loading:o,execute:C}=ts(se.invite),[f,x]=c.useState({email:"",role:"tenant"}),h=async i=>{i.preventDefault();try{const t=await C({email:f.email,role:f.role});N({title:"Invitation Sent!",description:`Invitation sent to ${f.email}. They will receive an email with signup instructions.`}),console.log("Invitation URL:",t.inviteUrl),a("/dashboard/tenants")}catch(t){N({title:"Invitation Failed",description:t.message||"Failed to send invitation. Please try again.",variant:"destructive"})}};return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs(u,{children:[e.jsxs(w,{children:[e.jsx(b,{children:"Add New Tenant"}),e.jsx(F,{children:"Invite a tenant to join the platform and access their tenant portal"})]}),e.jsx(p,{children:e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"email",children:"Email Address *"}),e.jsx(B,{id:"email",type:"email",value:f.email,onChange:i=>x(t=>({...t,email:i.target.value})),placeholder:"tenant@email.com",required:!0}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Invitation will be sent to this email"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"role",children:"Role *"}),e.jsxs(D,{value:f.role,onValueChange:i=>x(t=>({...t,role:i})),required:!0,children:[e.jsx(E,{children:e.jsx(U,{placeholder:"Select role"})}),e.jsxs(O,{children:[e.jsx(l,{value:"tenant",children:"Tenant"}),e.jsx(l,{value:"owner",children:"Property Owner"})]})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"The person will be invited as this role"})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"What happens next?"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"• An invitation email will be sent to the provided address"}),e.jsx("li",{children:"• The recipient will receive a secure signup link"}),e.jsx("li",{children:"• They'll complete their profile (name, phone, password)"}),e.jsx("li",{children:"• Once registered, they'll have access to their portal"})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(he,{to:"/dashboard/tenants",children:e.jsx(g,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(g,{type:"submit",disabled:o,className:"bg-ondo-orange hover:bg-ondo-red transition-colors",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Send Invitation"]})})]})]})})]})})})}function Ms(){return e.jsxs(Ue,{children:[e.jsx(W,{path:"/",element:e.jsx(Ls,{})}),e.jsx(W,{path:"/new",element:e.jsx(Fs,{})})]})}const je=[{id:1,name:"John Doe",email:"john.doe@email.com",phone:"(555) 123-4567",joinDate:"2020-03-15",status:"active",properties:3,totalUnits:28,monthlyRevenue:45200,investmentValue:68e5,lastLogin:"2024-01-20"},{id:2,name:"Sarah Wilson",email:"sarah.wilson@email.com",phone:"(555) 987-6543",joinDate:"2019-08-22",status:"active",properties:2,totalUnits:15,monthlyRevenue:28500,investmentValue:42e5,lastLogin:"2024-01-18"},{id:3,name:"Michael Chen",email:"michael.chen@email.com",phone:"(555) 456-7890",joinDate:"2021-01-10",status:"pending_invitation",properties:0,totalUnits:0,monthlyRevenue:0,investmentValue:0,lastLogin:null}];function Rs(){const[a,N]=c.useState(""),[o,C]=c.useState("all"),f=je.filter(i=>{const t=i.name.toLowerCase().includes(a.toLowerCase())||i.email.toLowerCase().includes(a.toLowerCase()),S=o==="all"||i.status===o;return t&&S}),x=i=>{switch(i){case"active":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"pending_invitation":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"inactive":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},h=i=>{console.log(`Resending invitation to ${i}`)};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Property Owners"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your property owner clients"})]}),e.jsx(he,{to:"/dashboard/owners/new",children:e.jsxs(g,{className:"bg-ondo-orange hover:bg-ondo-red transition-colors",children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Add Owner"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx(u,{children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Owners"}),e.jsx("p",{className:"text-2xl font-bold",children:je.length})]}),e.jsx(_,{className:"h-8 w-8 text-blue-500"})]})})}),e.jsx(u,{children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Owners"}),e.jsx("p",{className:"text-2xl font-bold",children:je.filter(i=>i.status==="active").length})]}),e.jsx(re,{className:"h-8 w-8 text-green-500"})]})})}),e.jsx(u,{children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Invites"}),e.jsx("p",{className:"text-2xl font-bold",children:je.filter(i=>i.status==="pending_invitation").length})]}),e.jsx(Te,{className:"h-8 w-8 text-orange-500"})]})})}),e.jsx(u,{children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Properties"}),e.jsx("p",{className:"text-2xl font-bold",children:je.reduce((i,t)=>i+t.properties,0)})]}),e.jsx(pe,{className:"h-8 w-8 text-purple-500"})]})})})]}),e.jsx(u,{className:"mb-6",children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ve,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(B,{placeholder:"Search owners...",value:a,onChange:i=>N(i.target.value),className:"pl-10"})]}),e.jsxs(D,{value:o,onValueChange:C,children:[e.jsx(E,{className:"w-48",children:e.jsx(U,{placeholder:"All Statuses"})}),e.jsxs(O,{children:[e.jsx(l,{value:"all",children:"All Statuses"}),e.jsx(l,{value:"active",children:"Active"}),e.jsx(l,{value:"pending_invitation",children:"Pending Invitation"}),e.jsx(l,{value:"inactive",children:"Inactive"})]})]})]})})}),e.jsx("div",{className:"space-y-4",children:f.map(i=>e.jsx(u,{className:"hover:shadow-lg transition-shadow",children:e.jsxs(p,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(Re,{className:"h-12 w-12",children:[e.jsx(Ie,{src:`/placeholder-owner-${i.id}.jpg`}),e.jsx(De,{children:i.name.split(" ").map(t=>t[0]).join("")})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:i.name}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Te,{className:"h-4 w-4"}),e.jsx("span",{children:i.email})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(as,{className:"h-4 w-4"}),e.jsx("span",{children:i.phone})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx(H,{className:x(i.status),children:i.status.replace("_"," ")}),i.status==="pending_invitation"&&e.jsxs(g,{variant:"outline",size:"sm",className:"ml-2 border-ondo-orange text-ondo-orange hover:bg-ondo-orange hover:text-white",onClick:()=>h(i.email),children:[e.jsx(Qe,{className:"h-4 w-4 mr-2"}),"Resend Invite"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(g,{variant:"outline",size:"sm",children:[e.jsx(ss,{className:"h-4 w-4 mr-2"}),"View"]}),e.jsxs(g,{variant:"outline",size:"sm",children:[e.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Edit"]})]})]})]}),i.status==="active"&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6 pt-6 border-t",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500 mb-1",children:[e.jsx(re,{className:"h-4 w-4"}),e.jsx("span",{children:"Properties"})]}),e.jsx("p",{className:"font-medium",children:i.properties}),e.jsxs("p",{className:"text-sm text-gray-500",children:[i.totalUnits," total units"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500 mb-1",children:[e.jsx(pe,{className:"h-4 w-4"}),e.jsx("span",{children:"Monthly Revenue"})]}),e.jsxs("p",{className:"font-medium",children:["$",i.monthlyRevenue.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500 mb-1",children:[e.jsx(re,{className:"h-4 w-4"}),e.jsx("span",{children:"Portfolio Value"})]}),e.jsxs("p",{className:"font-medium",children:["$",(i.investmentValue/1e6).toFixed(1),"M"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500 mb-1",children:[e.jsx(xe,{className:"h-4 w-4"}),e.jsx("span",{children:"Last Login"})]}),e.jsx("p",{className:"font-medium",children:i.lastLogin||"Never"})]})]}),i.status==="pending_invitation"&&e.jsx("div",{className:"mt-6 pt-6 border-t",children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-yellow-800 dark:text-yellow-200",children:"Invitation Pending"}),e.jsxs("p",{className:"text-sm text-yellow-600 dark:text-yellow-300",children:["Owner hasn't accepted the invitation yet. Joined: ",i.joinDate]})]}),e.jsxs(g,{variant:"outline",size:"sm",className:"border-ondo-orange text-ondo-orange hover:bg-ondo-orange hover:text-white",onClick:()=>h(i.email),children:[e.jsx(Qe,{className:"h-4 w-4 mr-2"}),"Resend Invitation"]})]})})]})},i.id))}),f.length===0&&e.jsx(u,{children:e.jsxs(p,{className:"text-center py-8",children:[e.jsx(_,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No owners found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:a||o!=="all"?"Try adjusting your filters":"No property owners have been added yet"}),e.jsx(he,{to:"/dashboard/owners/new",children:e.jsxs(g,{className:"bg-ondo-orange hover:bg-ondo-red transition-colors",children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Add First Owner"]})})]})})]})}function Is(){const a=Ee(),{toast:N}=ce(),{loading:o,execute:C}=ts(se.invite),[f,x]=c.useState({email:"",role:"owner"}),h=async i=>{i.preventDefault();try{const t=await C({email:f.email,role:f.role});N({title:"Invitation Sent!",description:`Invitation sent to ${f.email}. They will receive an email with signup instructions.`}),console.log("Invitation URL:",t.inviteUrl),a("/dashboard/owners")}catch(t){N({title:"Invitation Failed",description:t.message||"Failed to send invitation. Please try again.",variant:"destructive"})}};return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs(u,{children:[e.jsxs(w,{children:[e.jsx(b,{children:"Add New Property Owner"}),e.jsx(F,{children:"Invite a property owner to join your management platform"})]}),e.jsx(p,{children:e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"email",children:"Email Address *"}),e.jsx(B,{id:"email",type:"email",value:f.email,onChange:i=>x(t=>({...t,email:i.target.value})),placeholder:"owner@email.com",required:!0}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Invitation will be sent to this email"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"role",children:"Role *"}),e.jsxs(D,{value:f.role,onValueChange:i=>x(t=>({...t,role:i})),required:!0,children:[e.jsx(E,{children:e.jsx(U,{placeholder:"Select role"})}),e.jsxs(O,{children:[e.jsx(l,{value:"owner",children:"Property Owner"}),e.jsx(l,{value:"tenant",children:"Tenant"})]})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"The person will be invited as this role"})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"What happens next?"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"• An invitation email will be sent to the provided address"}),e.jsx("li",{children:"• The recipient will receive a secure signup link"}),e.jsx("li",{children:"• They'll complete their profile (name, phone, password)"}),e.jsx("li",{children:"• Once registered, they'll have access to their portal"})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(he,{to:"/dashboard/owners",children:e.jsx(g,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(g,{type:"submit",disabled:o,className:"bg-ondo-orange hover:bg-ondo-red transition-colors",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Send Invitation"]})})]})]})})]})})})}function Ds(){return e.jsxs(Ue,{children:[e.jsx(W,{path:"/",element:e.jsx(Rs,{})}),e.jsx(W,{path:"/new",element:e.jsx(Is,{})})]})}function Es(){return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs(u,{children:[e.jsx(w,{children:e.jsx(b,{children:"Manager Finances"})}),e.jsx(p,{children:e.jsx("p",{children:"Manager Finances component - Coming soon"})})]})})}function Us(){return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs(u,{children:[e.jsx(w,{children:e.jsx(b,{children:"Manager Reports"})}),e.jsx(p,{children:e.jsx("p",{children:"Manager Reports component - Coming soon"})})]})})}function Os(){const[a,N]=c.useState("general"),[o,C]=c.useState({general:{theme:"light",language:"english",timezone:"America/Denver"},notifications:{email:{propertyAlerts:!0,maintenanceRequests:!0,tenantIssues:!0,financialReports:!0,leaseRenewals:!0,ownerCommunications:!0},push:{urgentMaintenance:!0,tenantPayments:!0,leaseExpirations:!1,ownerMessages:!0}},security:{twoFactor:!1,sessionTimeout:"60",loginAlerts:!0},business:{defaultLeaseTerm:"12",maintenanceResponseTime:"24",autoBackup:!0,dataRetention:"7"}}),{toast:f}=ce(),x=(t,S,M)=>{C(y=>({...y,[t]:{...y[t],[S]:{...y[t][S],[M]:!y[t][S][M]}}}))},h=(t,S,M)=>{C(y=>({...y,[t]:{...y[t],[S]:M}}))},i=()=>{f({title:"Settings Saved",description:"Your settings have been updated successfully."})};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Manager Settings"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Configure your account preferences and business settings"})]}),e.jsxs(Oe,{value:a,onValueChange:N,className:"space-y-6",children:[e.jsxs($e,{className:"grid w-full grid-cols-4",children:[e.jsx(G,{value:"general",children:"General"}),e.jsx(G,{value:"notifications",children:"Notifications"}),e.jsx(G,{value:"security",children:"Security"}),e.jsx(G,{value:"business",children:"Business"})]}),e.jsx(Y,{value:"general",className:"space-y-6",children:e.jsxs(u,{children:[e.jsxs(w,{children:[e.jsx(b,{children:"General Settings"}),e.jsx(F,{children:"Configure your general preferences"})]}),e.jsx(p,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(j,{children:"Theme"}),e.jsxs(D,{value:o.general.theme,onValueChange:t=>h("general","theme",t),children:[e.jsx(E,{children:e.jsx(U,{})}),e.jsxs(O,{children:[e.jsx(l,{value:"light",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ss,{className:"h-4 w-4 mr-2"}),"Light"]})}),e.jsx(l,{value:"dark",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Cs,{className:"h-4 w-4 mr-2"}),"Dark"]})}),e.jsx(l,{value:"system",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ps,{className:"h-4 w-4 mr-2"}),"System"]})})]})]})]}),e.jsxs("div",{children:[e.jsx(j,{children:"Language"}),e.jsxs(D,{value:o.general.language,onValueChange:t=>h("general","language",t),children:[e.jsx(E,{children:e.jsx(U,{})}),e.jsxs(O,{children:[e.jsx(l,{value:"english",children:"English"}),e.jsx(l,{value:"spanish",children:"Spanish"}),e.jsx(l,{value:"french",children:"French"})]})]})]}),e.jsxs("div",{children:[e.jsx(j,{children:"Timezone"}),e.jsxs(D,{value:o.general.timezone,onValueChange:t=>h("general","timezone",t),children:[e.jsx(E,{children:e.jsx(U,{})}),e.jsxs(O,{children:[e.jsx(l,{value:"America/Denver",children:"Mountain Time (MST)"}),e.jsx(l,{value:"America/New_York",children:"Eastern Time (EST)"}),e.jsx(l,{value:"America/Chicago",children:"Central Time (CST)"}),e.jsx(l,{value:"America/Los_Angeles",children:"Pacific Time (PST)"})]})]})]})]})})]})}),e.jsxs(Y,{value:"notifications",className:"space-y-6",children:[e.jsxs(u,{children:[e.jsxs(w,{children:[e.jsx(b,{children:"Email Notifications"}),e.jsx(F,{children:"Choose what emails you'd like to receive"})]}),e.jsx(p,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(j,{children:"Property Alerts"}),e.jsx("p",{className:"text-sm text-gray-500",children:"New property listings and updates"})]}),e.jsx(ee,{checked:o.notifications.email.propertyAlerts,onCheckedChange:()=>x("notifications","email","propertyAlerts")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(j,{children:"Maintenance Requests"}),e.jsx("p",{className:"text-sm text-gray-500",children:"New maintenance requests from tenants"})]}),e.jsx(ee,{checked:o.notifications.email.maintenanceRequests,onCheckedChange:()=>x("notifications","email","maintenanceRequests")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(j,{children:"Tenant Issues"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Urgent tenant-related issues"})]}),e.jsx(ee,{checked:o.notifications.email.tenantIssues,onCheckedChange:()=>x("notifications","email","tenantIssues")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(j,{children:"Financial Reports"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Monthly and quarterly financial reports"})]}),e.jsx(ee,{checked:o.notifications.email.financialReports,onCheckedChange:()=>x("notifications","email","financialReports")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(j,{children:"Lease Renewals"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Lease renewal reminders and updates"})]}),e.jsx(ee,{checked:o.notifications.email.leaseRenewals,onCheckedChange:()=>x("notifications","email","leaseRenewals")})]})]})})]}),e.jsxs(u,{children:[e.jsxs(w,{children:[e.jsx(b,{children:"Push Notifications"}),e.jsx(F,{children:"Configure push notifications for your devices"})]}),e.jsx(p,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(j,{children:"Urgent Maintenance"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Emergency maintenance requests"})]}),e.jsx(ee,{checked:o.notifications.push.urgentMaintenance,onCheckedChange:()=>x("notifications","push","urgentMaintenance")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(j,{children:"Tenant Payments"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Payment received notifications"})]}),e.jsx(ee,{checked:o.notifications.push.tenantPayments,onCheckedChange:()=>x("notifications","push","tenantPayments")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(j,{children:"Lease Expirations"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Lease expiration warnings"})]}),e.jsx(ee,{checked:o.notifications.push.leaseExpirations,onCheckedChange:()=>x("notifications","push","leaseExpirations")})]})]})})]})]}),e.jsx(Y,{value:"security",className:"space-y-6",children:e.jsxs(u,{children:[e.jsxs(w,{children:[e.jsx(b,{children:"Security Settings"}),e.jsx(F,{children:"Manage your account security preferences"})]}),e.jsx(p,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(j,{children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Add an extra layer of security to your account"})]}),e.jsx(ee,{checked:o.security.twoFactor,onCheckedChange:()=>x("security","twoFactor","true")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(j,{children:"Login Alerts"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Get notified of new login attempts"})]}),e.jsx(ee,{checked:o.security.loginAlerts,onCheckedChange:()=>x("security","loginAlerts","true")})]}),e.jsxs("div",{children:[e.jsx(j,{children:"Session Timeout (minutes)"}),e.jsxs(D,{value:o.security.sessionTimeout,onValueChange:t=>h("security","sessionTimeout",t),children:[e.jsx(E,{className:"max-w-xs",children:e.jsx(U,{})}),e.jsxs(O,{children:[e.jsx(l,{value:"15",children:"15 minutes"}),e.jsx(l,{value:"30",children:"30 minutes"}),e.jsx(l,{value:"60",children:"1 hour"}),e.jsx(l,{value:"240",children:"4 hours"}),e.jsx(l,{value:"480",children:"8 hours"})]})]})]})]})})]})}),e.jsx(Y,{value:"business",className:"space-y-6",children:e.jsxs(u,{children:[e.jsxs(w,{children:[e.jsx(b,{children:"Business Settings"}),e.jsx(F,{children:"Configure your business preferences and defaults"})]}),e.jsxs(p,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(j,{children:"Default Lease Term (months)"}),e.jsxs(D,{value:o.business.defaultLeaseTerm,onValueChange:t=>h("business","defaultLeaseTerm",t),children:[e.jsx(E,{children:e.jsx(U,{})}),e.jsxs(O,{children:[e.jsx(l,{value:"6",children:"6 months"}),e.jsx(l,{value:"12",children:"12 months"}),e.jsx(l,{value:"18",children:"18 months"}),e.jsx(l,{value:"24",children:"24 months"})]})]})]}),e.jsxs("div",{children:[e.jsx(j,{children:"Maintenance Response Time (hours)"}),e.jsxs(D,{value:o.business.maintenanceResponseTime,onValueChange:t=>h("business","maintenanceResponseTime",t),children:[e.jsx(E,{children:e.jsx(U,{})}),e.jsxs(O,{children:[e.jsx(l,{value:"4",children:"4 hours"}),e.jsx(l,{value:"12",children:"12 hours"}),e.jsx(l,{value:"24",children:"24 hours"}),e.jsx(l,{value:"48",children:"48 hours"})]})]})]}),e.jsxs("div",{children:[e.jsx(j,{children:"Data Retention (years)"}),e.jsxs(D,{value:o.business.dataRetention,onValueChange:t=>h("business","dataRetention",t),children:[e.jsx(E,{children:e.jsx(U,{})}),e.jsxs(O,{children:[e.jsx(l,{value:"3",children:"3 years"}),e.jsx(l,{value:"5",children:"5 years"}),e.jsx(l,{value:"7",children:"7 years"}),e.jsx(l,{value:"10",children:"10 years"})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(j,{children:"Automatic Data Backup"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Automatically backup your data daily"})]}),e.jsx(ee,{checked:o.business.autoBackup,onCheckedChange:()=>x("business","autoBackup","true")})]})]})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(g,{onClick:i,className:"bg-gradient-to-r from-orange-500 to-red-800 hover:from-orange-600 hover:to-red-900",children:[e.jsx(ue,{className:"h-4 w-4 mr-2"}),"Save All Settings"]})})]})]})}function $s(){var T,n;const{user:a,refreshUser:N}=Me(),{toast:o}=ce(),[C,f]=c.useState(!1),[x,h]=c.useState({firstName:(a==null?void 0:a.firstName)||"",lastName:(a==null?void 0:a.lastName)||"",email:(a==null?void 0:a.email)||"",phone:(a==null?void 0:a.phone)||"",address:(a==null?void 0:a.address)||""}),[i,t]=c.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[S,M]=c.useState(!1),[y,k]=c.useState(!1),[P,R]=c.useState(null),[$,X]=c.useState(!0),[ae,V]=c.useState([]),[J,z]=c.useState(!1);c.useEffect(()=>{console.log("Manager Profile - User data changed:",a),a&&h(r=>({...r,firstName:a.firstName||"",lastName:a.lastName||"",email:a.email||"",phone:a.phone||"",address:a.address||""}))},[a]),c.useEffect(()=>{(async()=>{if(!(!a||a.role!=="manager"))try{X(!0);const v=await se.getPortfolioStats();R(v)}catch(v){console.error("Error fetching manager portfolio stats:",v),R({propertiesManaged:0,totalUnits:0,activeTenants:0,monthlyRevenue:0,formattedMonthlyRevenue:"$0K",occupancyRate:0})}finally{X(!1)}})()},[a]),c.useEffect(()=>{(async()=>{if(!(!a||a.role!=="manager"))try{z(!0);const v=await se.getInvitedUsers();V(v)}catch(v){console.error("Error fetching invited users:",v),V([])}finally{z(!1)}})()},[a]);const q=(r,v)=>{h(I=>({...I,[r]:v}))},Z=async()=>{if(!x.firstName.trim()||!x.lastName.trim()){o({title:"Error",description:"Please fill in all required fields (First Name, Last Name).",variant:"destructive"});return}k(!0);try{const r=await se.updateProfile({firstName:x.firstName.trim(),lastName:x.lastName.trim(),phone:x.phone.trim()||void 0,address:x.address.trim()||void 0});o({title:"Profile Updated",description:"Your profile information has been saved successfully."}),console.log("About to call refreshUser..."),await N(),console.log("refreshUser completed"),r.user&&(console.log("Updating form data with response:",r.user),h(v=>({...v,firstName:r.user.firstName,lastName:r.user.lastName,email:r.user.email,phone:r.user.phone||"",address:r.user.address||""}))),f(!1)}catch(r){const v=r instanceof oe?r.message:"Failed to update profile. Please try again.";o({title:"Error",description:v,variant:"destructive"})}finally{k(!1)}},ne=()=>{h({firstName:(a==null?void 0:a.firstName)||"",lastName:(a==null?void 0:a.lastName)||"",email:(a==null?void 0:a.email)||"",phone:(a==null?void 0:a.phone)||"",address:(a==null?void 0:a.address)||""}),f(!1)},ie=async r=>{try{k(!0);const v=await se.updateProfile({firstName:x.firstName,lastName:x.lastName,phone:x.phone,address:x.address,profilePicture:r});await N(),o({title:"Profile picture updated",description:"Your profile picture has been updated successfully."})}catch(v){console.error("Error updating profile picture:",v),o({title:"Error",description:v.message||"Failed to update profile picture. Please try again.",variant:"destructive"})}finally{k(!1)}},te=(r,v)=>{t(I=>({...I,[r]:v}))},d=async()=>{if(i.newPassword!==i.confirmPassword){o({title:"Error",description:"New passwords do not match.",variant:"destructive"});return}if(i.newPassword.length<8){o({title:"Error",description:"New password must be at least 8 characters long.",variant:"destructive"});return}M(!0);try{await se.changePassword({currentPassword:i.currentPassword,newPassword:i.newPassword}),o({title:"Success",description:"Password changed successfully."}),t({currentPassword:"",newPassword:"",confirmPassword:""})}catch(r){const v=r instanceof oe?r.message:"Failed to change password. Please try again.";o({title:"Error",description:v,variant:"destructive"})}finally{M(!1)}};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Manager Profile"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your account and property management preferences"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx(u,{children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsxs("div",{className:"relative",children:[a!=null&&a.profilePicture?e.jsx(ms,{imageSrc:a.profilePicture,userName:`${a.firstName} ${a.lastName}`}):e.jsxs(Re,{className:"h-24 w-24",children:[e.jsx(Ie,{src:a==null?void 0:a.profilePicture}),e.jsxs(De,{className:"text-lg",children:[(T=a==null?void 0:a.firstName)==null?void 0:T[0],(n=a==null?void 0:a.lastName)==null?void 0:n[0]]})]}),e.jsx(hs,{onCropComplete:ie,trigger:e.jsx(g,{variant:"outline",size:"sm",className:"absolute bottom-0 right-0 rounded-full h-8 w-8 p-0",children:e.jsx(ks,{className:"h-4 w-4"})})})]}),e.jsxs("h3",{className:"font-semibold text-lg mt-4",children:[a==null?void 0:a.firstName," ",a==null?void 0:a.lastName]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Property Manager"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:a==null?void 0:a.email}),e.jsxs("div",{className:"w-full mt-6 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Properties Managed:"}),e.jsx("span",{className:"font-medium",children:$?"...":(P==null?void 0:P.propertiesManaged)||0})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Active Owners:"}),e.jsx("span",{className:"font-medium",children:J||$?"...":ae.filter(r=>r.role==="owner"&&r.isActive).length})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Active Tenants:"}),e.jsx("span",{className:"font-medium",children:J||$?"...":ae.filter(r=>r.role==="tenant"&&r.isActive).length})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Monthly Revenue:"}),e.jsx("span",{className:"font-medium",children:$?"...":(P==null?void 0:P.formattedMonthlyRevenue)||"$0K"})]})]})]})})})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs(Oe,{defaultValue:"personal",className:"space-y-6",children:[e.jsxs($e,{className:"grid w-full grid-cols-2",children:[e.jsx(G,{value:"personal",children:"Personal Info"}),e.jsx(G,{value:"security",children:"Security"})]}),e.jsx(Y,{value:"personal",className:"space-y-6",children:e.jsxs(u,{children:[e.jsxs(w,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Personal Information"}),e.jsx(F,{children:"Update your personal details"})]}),C?e.jsxs("div",{className:"space-x-2",children:[e.jsx(g,{variant:"outline",size:"sm",onClick:ne,disabled:y,children:"Cancel"}),e.jsx(g,{size:"sm",onClick:Z,disabled:y,children:y?"Saving...":"Save"})]}):e.jsx(g,{onClick:()=>f(!0),children:"Edit"})]}),e.jsxs(p,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"firstName",children:"First Name"}),e.jsx(B,{id:"firstName",value:x.firstName,onChange:r=>q("firstName",r.target.value),disabled:!C||y})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"lastName",children:"Last Name"}),e.jsx(B,{id:"lastName",value:x.lastName,onChange:r=>q("lastName",r.target.value),disabled:!C||y})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"email",children:"Email Address"}),e.jsx(B,{id:"email",type:"email",value:x.email,disabled:!0,className:"bg-gray-50 text-gray-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"phone",children:"Phone Number"}),e.jsx(B,{id:"phone",value:x.phone,onChange:r=>q("phone",r.target.value),disabled:!C||y,placeholder:"Enter phone number"})]})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"address",children:"Address"}),e.jsx(B,{id:"address",value:x.address,onChange:r=>q("address",r.target.value),disabled:!C||y,placeholder:"Enter your address"})]})]})]})}),e.jsx(Y,{value:"security",className:"space-y-6",children:e.jsxs(u,{children:[e.jsxs(w,{children:[e.jsx(b,{children:"Security Settings"}),e.jsx(F,{children:"Manage your account security"})]}),e.jsx(p,{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-4",children:"Change Password"}),e.jsxs("div",{className:"space-y-4 max-w-md",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"currentPassword",children:"Current Password"}),e.jsx(B,{id:"currentPassword",type:"password",value:i.currentPassword,onChange:r=>te("currentPassword",r.target.value),disabled:S})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"newPassword",children:"New Password"}),e.jsx(B,{id:"newPassword",type:"password",value:i.newPassword,onChange:r=>te("newPassword",r.target.value),disabled:S})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsx(B,{id:"confirmPassword",type:"password",value:i.confirmPassword,onChange:r=>te("confirmPassword",r.target.value),disabled:S})]}),e.jsx(g,{onClick:d,disabled:S||!i.currentPassword||!i.newPassword||!i.confirmPassword,children:S?"Updating...":"Update Password"})]})]})})]})})]})})]})]})}function Ys(){return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsx(c.Suspense,{fallback:e.jsx(os,{}),children:e.jsxs(Ue,{children:[e.jsx(W,{path:"/",element:e.jsx(Ts,{})}),e.jsx(W,{path:"/properties/*",element:e.jsx(As,{})}),e.jsx(W,{path:"/owners/*",element:e.jsx(Ds,{})}),e.jsx(W,{path:"/tenants/*",element:e.jsx(Ms,{})}),e.jsx(W,{path:"/maintenance/*",element:e.jsx(ns,{})}),e.jsx(W,{path:"/finances/*",element:e.jsx(Es,{})}),e.jsx(W,{path:"/reports",element:e.jsx(Us,{})}),e.jsx(W,{path:"/profile",element:e.jsx($s,{})}),e.jsx(W,{path:"/settings",element:e.jsx(Os,{})})]})})})}export{Ys as default};
