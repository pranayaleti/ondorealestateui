import{k as I,j as e,L as q,l as u,m as N}from"./index-BAAyN0wm.js";import{h as D,u as T,r as d,L as j}from"./react-vendor-CaQki1kR.js";import{L as o,I as n}from"./label-BPjYTGLq.js";import{C as h,d as g}from"./card-VX4ullBD.js";import{u as b}from"./useApi-DPRJXdFr.js";import{p as Y,A as v,n as M,E as w,l as y}from"./ui-vendor-DU0NExUN.js";function H(){const{token:i}=D(),P=T(),{toast:l}=I(),[a,t]=d.useState({firstName:"",lastName:"",phone:"",address:"",profilePicture:"",password:"",confirmPassword:""}),[m,C]=d.useState(!1),[x,E]=d.useState(!1),[S,R]=d.useState(!1),{data:c,loading:A,error:O,execute:p}=b(N.getInvitation),{loading:f,execute:F}=b(N.signup);d.useEffect(()=>{i&&p(i)},[i,p]);const k=async r=>{if(r.preventDefault(),!i){l({title:"Invalid invitation",description:"No invitation token found.",variant:"destructive"});return}if(a.password.length<8){l({title:"Password too short",description:"Password must be at least 8 characters long.",variant:"destructive"});return}if(a.password!==a.confirmPassword){l({title:"Passwords don't match",description:"Please make sure both passwords are identical.",variant:"destructive"});return}try{const s=await F({token:i,firstName:a.firstName,lastName:a.lastName,phone:a.phone||void 0,address:a.address||void 0,profilePicture:a.profilePicture||void 0,password:a.password});R(!0),l({title:"Account created successfully!",description:"Welcome to Ondo Real Estate. You're now logged in."}),setTimeout(()=>{const L=s.user.role==="manager"?"/dashboard":s.user.role==="owner"?"/owner":"/tenant";P(L)},2e3)}catch(s){l({title:"Signup failed",description:s.message||"An error occurred during signup.",variant:"destructive"})}};return A?e.jsx(q,{}):O||!c?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"flex flex-col items-center mb-8",children:e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("img",{src:u(),alt:"Ondo Real Estate logo",className:"h-16 w-auto mr-3"}),e.jsx("span",{className:"text-6xl font-medium bg-gradient-to-r from-orange-500 to-red-800 text-transparent bg-clip-text",children:"Ondo Real Estate"})]})}),e.jsx(h,{className:"border-none shadow-lg",children:e.jsxs(g,{className:"pt-6 text-center",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(Y,{className:"h-8 w-8 text-red-600"})})}),e.jsx("h1",{className:"text-2xl font-medium mb-4 bg-gradient-to-r from-orange-500 to-red-800 text-transparent bg-clip-text",children:"Invalid Invitation"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"This invitation link is invalid or has expired. Please contact your administrator for a new invitation."}),e.jsx(j,{to:"/login",children:e.jsxs("button",{className:"w-full bg-gradient-to-r from-orange-500 to-red-800 hover:from-orange-600 hover:to-red-900 text-white font-medium py-4 rounded-2xl text-xl transition-all duration-200 flex items-center justify-center gap-2",children:["Back to Login",e.jsx(v,{className:"h-5 w-5"})]})})]})})]})}):S?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"flex flex-col items-center mb-8",children:e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("img",{src:u(),alt:"Ondo Real Estate logo",className:"h-16 w-auto mr-3"}),e.jsx("span",{className:"text-6xl font-medium bg-gradient-to-r from-orange-500 to-red-800 text-transparent bg-clip-text",children:"Ondo Real Estate"})]})}),e.jsx(h,{className:"border-none shadow-lg",children:e.jsxs(g,{className:"pt-6 text-center",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(M,{className:"h-8 w-8 text-green-600"})})}),e.jsx("h1",{className:"text-2xl font-medium mb-4 bg-gradient-to-r from-orange-500 to-red-800 text-transparent bg-clip-text",children:"Welcome to Ondo Real Estate!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Your account has been created successfully. You're being redirected to your dashboard..."}),e.jsx("div",{className:"w-8 h-8 border-4 border-orange-500 border-t-transparent rounded-full animate-spin mx-auto"})]})})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"flex flex-col items-center mb-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("img",{src:u(),alt:"Ondo Real Estate logo",className:"h-16 w-auto mr-3"}),e.jsx("span",{className:"text-6xl font-medium bg-gradient-to-r from-orange-500 to-red-800 text-transparent bg-clip-text",children:"Ondo Real Estate"})]}),e.jsx("h1",{className:"text-2xl font-medium bg-gradient-to-r from-orange-500 to-red-800 text-transparent bg-clip-text",children:"Complete Your Registration"})]}),e.jsx(h,{className:"border-none shadow-lg",children:e.jsxs(g,{className:"pt-6",children:[e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Email:"})," ",c.email]}),e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Role:"})," ",c.role.charAt(0).toUpperCase()+c.role.slice(1)]})]}),e.jsxs("form",{onSubmit:k,className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"firstName",className:"text-gray-700",children:"First Name *"}),e.jsx(n,{id:"firstName",type:"text",placeholder:"John",value:a.firstName,onChange:r=>t(s=>({...s,firstName:r.target.value})),className:"rounded-xl border-gray-300 focus:border-orange-500 focus:ring-orange-500",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"lastName",className:"text-gray-700",children:"Last Name *"}),e.jsx(n,{id:"lastName",type:"text",placeholder:"Doe",value:a.lastName,onChange:r=>t(s=>({...s,lastName:r.target.value})),className:"rounded-xl border-gray-300 focus:border-orange-500 focus:ring-orange-500",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"mobile",className:"text-gray-700",children:"Mobile Number (Optional)"}),e.jsx(n,{id:"mobile",type:"tel",placeholder:"+1 (555) 123-4567",value:a.phone,onChange:r=>t(s=>({...s,phone:r.target.value})),className:"rounded-xl border-gray-300 focus:border-orange-500 focus:ring-orange-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"address",className:"text-gray-700",children:"Address (Optional)"}),e.jsx(n,{id:"address",type:"text",placeholder:"123 Main St, City, State 12345",value:a.address,onChange:r=>t(s=>({...s,address:r.target.value})),className:"rounded-xl border-gray-300 focus:border-orange-500 focus:ring-orange-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"profilePicture",className:"text-gray-700",children:"Profile Picture URL (Optional)"}),e.jsx(n,{id:"profilePicture",type:"url",placeholder:"https://example.com/profile.jpg",value:a.profilePicture,onChange:r=>t(s=>({...s,profilePicture:r.target.value})),className:"rounded-xl border-gray-300 focus:border-orange-500 focus:ring-orange-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"password",className:"text-gray-700",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(n,{id:"password",type:m?"text":"password",placeholder:"Create a strong password",value:a.password,onChange:r=>t(s=>({...s,password:r.target.value})),className:"rounded-xl border-gray-300 focus:border-orange-500 focus:ring-orange-500 pr-10",required:!0}),e.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",onClick:()=>C(!m),children:m?e.jsx(w,{className:"h-4 w-4"}):e.jsx(y,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Must be at least 8 characters long"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"confirmPassword",className:"text-gray-700",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(n,{id:"confirmPassword",type:x?"text":"password",placeholder:"Confirm your password",value:a.confirmPassword,onChange:r=>t(s=>({...s,confirmPassword:r.target.value})),className:"rounded-xl border-gray-300 focus:border-orange-500 focus:ring-orange-500 pr-10",required:!0}),e.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",onClick:()=>E(!x),children:x?e.jsx(w,{className:"h-4 w-4"}):e.jsx(y,{className:"h-4 w-4"})})]})]}),e.jsx("button",{type:"submit",disabled:f,className:"w-full bg-gradient-to-r from-orange-500 to-red-800 hover:from-orange-600 hover:to-red-900 text-white font-medium py-4 rounded-2xl text-xl transition-all duration-200 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating Account..."]}):e.jsxs(e.Fragment,{children:["Create Account",e.jsx(v,{className:"h-5 w-5"})]})})]})]})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx(j,{to:"/login",className:"text-orange-600 hover:underline font-medium",children:"Sign in here"})]})})]})})}export{H as default};
