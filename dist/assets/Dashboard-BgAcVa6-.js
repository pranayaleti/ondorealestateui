import{k as ce,m as Ne,j as e,B as g,i as Re,p as ye,l as te,n as Je,A as oe,o as Ie,q as Ee,r as De,L as os}from"./index-Cey_bthY.js";import{r as c,u as Ue,g as xs,e as Oe,f as K,L as he}from"./react-vendor-CaQki1kR.js";import{C as u,d as p,a as S,b as C,c as R}from"./card-ukXaUSaA.js";import{S as E,a as D,b as U,c as O,d as i,B as G,D as we,e as Fe,f as be,g as Se,h as Ce,i as Pe,j as Me,T as $e,k as Ve,l as Q,m as X,n as ae,P as ms,I as hs}from"./profile-picture-viewer-CykONBNP.js";import{L as h,I as z}from"./label-R2Ni4VAd.js";import{M as js,P as us,a as ps}from"./modern-property-card-VdDZ9OOd.js";import{T as Xe}from"./textarea-lSwZYRii.js";import{W as Le,q as ze,m as gs,o as He,B as re,U as We,r as xe,s as vs,t as Ze,n as ue,u as me,v as Ns,p as es,a as Ge,X as Ye,j as J,e as ke,w as le,f as Te,c as fs,x as ys,D as pe,y as ws,z as bs,G as Ke,l as ss,J as Ae,P as as,K as Qe,S as Ss,M as Cs,N as Ps,O as ks}from"./ui-vendor-DU0NExUN.js";import{u as ts}from"./useApi-zOuyr6jI.js";function ns(){const[a,v]=c.useState([]),[d,P]=c.useState(!0),[N,x]=c.useState(null),[j,n]=c.useState(""),[t,k]=c.useState("all"),[I,f]=c.useState("all"),[w,T]=c.useState(null),[H,q]=c.useState(!1),[ie,se]=c.useState(!1),[M,W]=c.useState({status:"",assignedTo:"",message:""}),{toast:B}=ce();c.useEffect(()=>{$()},[]);const $=async()=>{try{P(!0),x(null);const r=await Ne.getManagerMaintenanceRequests();v(r)}catch(r){console.error("Error fetching maintenance requests:",r),x("Failed to load maintenance requests"),B({title:"Error",description:"Failed to load maintenance requests. Please try again.",variant:"destructive"})}finally{P(!1)}},o=a.filter(r=>{const l=r.title.toLowerCase().includes(j.toLowerCase())||r.description.toLowerCase().includes(j.toLowerCase()),y=t==="all"||r.status===t,V=I==="all"||r.priority===I;return l&&y&&V}),A=r=>{switch(r){case"completed":return e.jsx(ue,{className:"h-4 w-4 text-green-500"});case"in_progress":return e.jsx(me,{className:"h-4 w-4 text-blue-500"});case"pending":return e.jsx(He,{className:"h-4 w-4 text-yellow-500"});default:return e.jsx(Le,{className:"h-4 w-4 text-gray-500"})}},Y=r=>{switch(r){case"emergency":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},b=async()=>{if(w)try{await Ne.updateMaintenanceRequest(w.id,{status:M.status,assignedTo:M.assignedTo,managerNotes:M.message}),B({title:"Request Updated",description:"Maintenance request has been updated successfully."}),q(!1),W({status:"",assignedTo:"",message:""}),$()}catch(r){console.error("Error updating maintenance request:",r),B({title:"Error",description:r.message||"Failed to update maintenance request.",variant:"destructive"})}},_=async()=>{if(w)try{await Ne.updateMaintenanceRequest(w.id,{status:"in_progress",assignedTo:M.assignedTo,managerNotes:`Request assigned to ${M.assignedTo}`}),B({title:"Request Assigned",description:"Maintenance request has been assigned successfully."}),se(!1),W({status:"",assignedTo:"",message:""}),$()}catch(r){console.error("Error assigning maintenance request:",r),B({title:"Error",description:r.message||"Failed to assign maintenance request.",variant:"destructive"})}},ne=async r=>{try{await Ne.updateMaintenanceRequest(r,{status:"completed",managerNotes:"Maintenance request has been completed."}),B({title:"Request Completed",description:"Maintenance request has been marked as completed."}),$()}catch(l){console.error("Error completing maintenance request:",l),B({title:"Error",description:l.message||"Failed to complete maintenance request.",variant:"destructive"})}};return e.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Maintenance Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage tenant maintenance requests"})]}),e.jsxs(g,{onClick:$,variant:"outline",children:[e.jsx(Le,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),e.jsx(u,{children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(h,{htmlFor:"search",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(ze,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(z,{id:"search",placeholder:"Search requests...",value:j,onChange:r=>n(r.target.value),className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"status",children:"Status"}),e.jsxs(E,{value:t,onValueChange:k,children:[e.jsx(D,{children:e.jsx(U,{placeholder:"All Statuses"})}),e.jsxs(O,{children:[e.jsx(i,{value:"all",children:"All Statuses"}),e.jsx(i,{value:"pending",children:"Pending"}),e.jsx(i,{value:"in_progress",children:"In Progress"}),e.jsx(i,{value:"completed",children:"Completed"}),e.jsx(i,{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"priority",children:"Priority"}),e.jsxs(E,{value:I,onValueChange:f,children:[e.jsx(D,{children:e.jsx(U,{placeholder:"All Priorities"})}),e.jsxs(O,{children:[e.jsx(i,{value:"all",children:"All Priorities"}),e.jsx(i,{value:"emergency",children:"Emergency"}),e.jsx(i,{value:"high",children:"High"}),e.jsx(i,{value:"medium",children:"Medium"}),e.jsx(i,{value:"low",children:"Low"})]})]})]})]})})}),e.jsx("div",{className:"space-y-4",children:d?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(gs,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading maintenance requests..."})]}):N?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(He,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Requests"}),e.jsx("p",{className:"text-gray-600 mb-4",children:N}),e.jsx(g,{onClick:$,children:"Try Again"})]}):o.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Le,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Maintenance Requests"}),e.jsx("p",{className:"text-gray-600",children:"No maintenance requests found matching your criteria."})]}):o.map(r=>{var l,y;return e.jsx(u,{className:"hover:shadow-md transition-shadow",children:e.jsxs(p,{className:"pt-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[A(r.status),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:r.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:r.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(re,{className:"h-4 w-4 mr-1"}),r.propertyTitle||`Property ${(l=r.propertyId)==null?void 0:l.slice(-8)}`]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(We,{className:"h-4 w-4 mr-1"}),r.tenantFirstName&&r.tenantLastName?`${r.tenantFirstName} ${r.tenantLastName}`:`Tenant ${(y=r.tenantId)==null?void 0:y.slice(-8)}`]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(xe,{className:"h-4 w-4 mr-1"}),new Date(r.createdAt).toLocaleDateString()]})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[e.jsxs(G,{className:Y(r.priority),children:[r.priority," priority"]}),e.jsx(G,{variant:"outline",children:r.status.replace("_"," ")})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mb-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Category:"}),e.jsx("p",{className:"font-medium capitalize",children:r.category})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Assigned To:"}),e.jsx("p",{className:"font-medium",children:r.assignedTo||"Not assigned"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Scheduled:"}),e.jsx("p",{className:"font-medium",children:r.dateScheduled?new Date(r.dateScheduled).toLocaleDateString():"Not scheduled"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Completed:"}),e.jsx("p",{className:"font-medium",children:r.dateCompleted?new Date(r.dateCompleted).toLocaleDateString():"Not completed"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm mb-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 font-medium",children:"Property Details:"}),e.jsx("p",{className:"font-medium",children:r.propertyTitle||"Property Title N/A"}),e.jsx("p",{className:"text-gray-600 text-xs",children:r.propertyAddress&&r.propertyCity?`${r.propertyAddress}, ${r.propertyCity}`:"Address not available"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 font-medium",children:"Tenant Details:"}),e.jsx("p",{className:"font-medium",children:r.tenantFirstName&&r.tenantLastName?`${r.tenantFirstName} ${r.tenantLastName}`:"Tenant Name N/A"}),e.jsxs("p",{className:"text-gray-600 text-xs",children:[r.tenantEmail||"Email not available",r.tenantPhone&&` • ${r.tenantPhone}`]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:r.photos&&r.photos.length>0&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(vs,{className:"h-4 w-4 mr-1"}),r.photos.length," photo(s)"]})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(we,{open:H,onOpenChange:q,children:[e.jsx(Fe,{asChild:!0,children:e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>{console.log("Opening update dialog for request:",r),T(r),W({status:r.status||"",assignedTo:r.assignedTo||"",message:""})},children:[e.jsx(Ze,{className:"h-4 w-4 mr-1"}),"Update"]})}),e.jsxs(be,{children:[e.jsxs(Se,{children:[e.jsx(Ce,{children:"Update Maintenance Request"}),e.jsx(Pe,{children:"Update the status and details of this maintenance request."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"status",children:"Status"}),e.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["Current status: ",M.status||"none"," | Selected request: ",(w==null?void 0:w.id)||"none"]}),e.jsxs(E,{value:M.status,onValueChange:V=>{console.log("Status changed to:",V),W(Z=>({...Z,status:V}))},children:[e.jsx(D,{className:"w-full",children:e.jsx(U,{placeholder:"Select status"})}),e.jsxs(O,{children:[e.jsx(i,{value:"pending",children:"Pending"}),e.jsx(i,{value:"in_progress",children:"In Progress"}),e.jsx(i,{value:"completed",children:"Completed"}),e.jsx(i,{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"assignedTo",children:"Assigned To"}),e.jsx(z,{id:"assignedTo",placeholder:"Technician name",value:M.assignedTo,onChange:V=>W(Z=>({...Z,assignedTo:V.target.value}))})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"message",children:"Update Message"}),e.jsx(Xe,{id:"message",placeholder:"Add an update message...",value:M.message,onChange:V=>W(Z=>({...Z,message:V.target.value}))})]})]}),e.jsxs(Me,{children:[e.jsx(g,{variant:"outline",onClick:()=>q(!1),children:"Cancel"}),e.jsx(g,{onClick:b,children:"Update Request"})]})]})]}),e.jsxs(we,{open:ie,onOpenChange:se,children:[e.jsx(Fe,{asChild:!0,children:e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>T(r),children:[e.jsx(We,{className:"h-4 w-4 mr-1"}),"Assign"]})}),e.jsxs(be,{children:[e.jsxs(Se,{children:[e.jsx(Ce,{children:"Assign Maintenance Request"}),e.jsx(Pe,{children:"Assign this maintenance request to a technician."})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(h,{htmlFor:"assignedTo",children:"Technician Name"}),e.jsx(z,{id:"assignedTo",placeholder:"Enter technician name",value:M.assignedTo,onChange:V=>W(Z=>({...Z,assignedTo:V.target.value}))})]})}),e.jsxs(Me,{children:[e.jsx(g,{variant:"outline",onClick:()=>se(!1),children:"Cancel"}),e.jsx(g,{onClick:_,children:"Assign Request"})]})]})]}),r.status!=="completed"&&e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>ne(r.id),children:[e.jsx(ue,{className:"h-4 w-4 mr-1"}),"Complete"]})]})]})]})},r.id)})})]})}function Ts(){const{user:a}=Re(),{toast:v}=ce(),d=Ue(),[P,N]=c.useState("overview"),[x,j]=c.useState([]),[n,t]=c.useState([]),[k,I]=c.useState(!0),[f,w]=c.useState({email:"",role:"owner"}),[T,H]=c.useState(!1),[q,ie]=c.useState([]),[se,M]=c.useState(!1),[W,B]=c.useState(null),[$,o]=c.useState(!1),[A,Y]=c.useState([]),[b,_]=c.useState(!1),[ne,r]=c.useState(!1),[l,y]=c.useState({email:"",role:"tenant"});c.useEffect(()=>{V(),Z(),qe()},[]);const V=async()=>{try{I(!0);const s=await ye.getProperties(),m=s.filter(L=>L.status==="pending");j(s),t(m),console.log("Fetched properties:",s),console.log("Properties with owners:",s.filter(L=>L.owner))}catch(s){console.error("Error fetching dashboard data:",s),v({title:"Error",description:"Failed to load dashboard data",variant:"destructive"})}finally{I(!1)}},Z=async()=>{try{M(!0);const s=await te.getInvitedUsers();console.log("Fetched users:",s),ie(s)}catch(s){console.error("Failed to fetch invited users:",s),v({title:"Error",description:"Failed to load users. Please try again.",variant:"destructive"})}finally{M(!1)}},qe=async()=>{try{_(!0);const s=await Je.getManagerLeads();Y(s)}catch(s){console.error("Failed to fetch leads:",s),v({title:"Error",description:"Failed to load leads. Please try again.",variant:"destructive"})}finally{_(!1)}},ge={totalProperties:x.length,pendingReview:n.length,approvedProperties:x.filter(s=>s.status==="approved").length,rejectedProperties:x.filter(s=>s.status==="rejected").length},de=async(s,m)=>{try{await ye.updatePropertyStatus(s,m),v({title:"Property Updated",description:`Property has been ${m}.`,duration:1e3}),V(),$&&o(!1)}catch(L){const ee=L instanceof oe?L.message:`Failed to ${m} property. Please try again.`;v({title:"Error",description:ee,variant:"destructive",duration:6e3})}},ve=s=>{B(s),o(!0)},rs=async(s,m)=>{try{await Je.updateLeadStatus(s,m),v({title:"Lead Updated",description:`Lead status updated to ${m}.`}),qe()}catch(L){console.error("Failed to update lead status:",L),v({title:"Error",description:"Failed to update lead status. Please try again.",variant:"destructive"})}},is=s=>{y({email:s.tenantEmail,role:"tenant"}),r(!0)},ls=async()=>{if(!l.email.trim()){v({title:"Error",description:"Please enter an email address.",variant:"destructive"});return}try{H(!0);const s=await te.invite({email:l.email,role:l.role});v({title:"Invitation Sent",description:`Invitation sent to ${l.email}.`}),console.log("Invitation URL:",s==null?void 0:s.inviteUrl),r(!1),y({email:"",role:"tenant"}),Z()}catch(s){const m=s instanceof oe?s.message:"Failed to send invitation. Please try again.";v({title:"Invitation Failed",description:m,variant:"destructive"})}finally{H(!1)}},Be=async(s,m)=>{try{await te.updateUserStatus(s,m),v({title:"User Status Updated",description:`User has been ${m?"enabled":"disabled"}.`,duration:4e3}),Z()}catch(L){const ee=L instanceof oe?L.message:`Failed to ${m?"enable":"disable"} user. Please try again.`;v({title:"Error",description:ee,variant:"destructive",duration:6e3})}},cs=async()=>{if(!f.email.trim()){v({title:"Error",description:"Please enter an email address.",variant:"destructive",duration:4e3});return}H(!0);try{await te.invite({email:f.email.trim(),role:f.role}),v({title:"Invitation Sent",description:`Invitation sent to ${f.email} as ${f.role}.`,duration:5e3}),w({email:"",role:"owner"}),Z()}catch(s){const m=s instanceof oe?s.message:"Failed to send invitation. Please try again.";v({title:"Error",description:m,variant:"destructive",duration:6e3})}finally{H(!1)}};return k?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"text-lg",children:"Loading dashboard..."})})}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold",children:["Welcome back, ",a==null?void 0:a.firstName," ",a==null?void 0:a.lastName,"!"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Here's your property management overview."})]}),e.jsxs($e,{value:P,onValueChange:N,className:"space-y-4",children:[e.jsxs(Ve,{children:[e.jsx(Q,{value:"overview",children:"Overview"}),e.jsx(Q,{value:"properties",children:"Properties"}),e.jsx(Q,{value:"owner-properties",children:"Owner Properties"}),e.jsx(Q,{value:"leads",children:"Leads"}),e.jsx(Q,{value:"maintenance",children:"Maintenance"}),e.jsx(Q,{value:"my-users",children:"My Users"}),e.jsx(Q,{value:"user-management",children:"User Management"})]}),e.jsxs(X,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(u,{className:"cursor-pointer hover:shadow-lg dark:hover:shadow-xl dark:hover:shadow-black/50 transition-all hover:border-primary/50 dark:hover:border-primary/30 dark:hover:bg-card/80",onClick:()=>{N("properties")},children:[e.jsxs(S,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(C,{className:"text-sm font-medium",children:"Total Properties"}),e.jsx(re,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(p,{children:[e.jsx("div",{className:"text-2xl font-bold",children:ge.totalProperties}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All registered properties"})]})]}),e.jsxs(u,{className:"cursor-pointer hover:shadow-lg dark:hover:shadow-xl dark:hover:shadow-black/50 transition-all hover:border-primary/50 dark:hover:border-primary/30 dark:hover:bg-card/80",onClick:()=>{d("/dashboard/properties?status=pending")},children:[e.jsxs(S,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(C,{className:"text-sm font-medium",children:"Pending Review"}),e.jsx(me,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(p,{children:[e.jsx("div",{className:"text-2xl font-bold",children:ge.pendingReview}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting approval"})]})]}),e.jsxs(u,{className:"cursor-pointer hover:shadow-lg dark:hover:shadow-xl dark:hover:shadow-black/50 transition-all hover:border-primary/50 dark:hover:border-primary/30 dark:hover:bg-card/80",onClick:()=>{d("/dashboard/properties?status=approved")},children:[e.jsxs(S,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(C,{className:"text-sm font-medium",children:"Approved"}),e.jsx(Ns,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(p,{children:[e.jsx("div",{className:"text-2xl font-bold",children:ge.approvedProperties}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active properties"})]})]}),e.jsxs(u,{className:"cursor-pointer hover:shadow-lg dark:hover:shadow-xl dark:hover:shadow-black/50 transition-all hover:border-primary/50 dark:hover:border-primary/30 dark:hover:bg-card/80",onClick:()=>{d("/dashboard/properties?status=rejected")},children:[e.jsxs(S,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(C,{className:"text-sm font-medium",children:"Rejected"}),e.jsx(es,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(p,{children:[e.jsx("div",{className:"text-2xl font-bold",children:ge.rejectedProperties}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Rejected submissions"})]})]})]}),e.jsxs(u,{children:[e.jsxs(S,{children:[e.jsx(C,{children:"Recent Property Submissions"}),e.jsx(R,{children:"Latest properties submitted for review"})]}),e.jsx(p,{children:e.jsxs("div",{className:"space-y-4",children:[n.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg cursor-pointer hover:shadow-md dark:hover:shadow-lg dark:hover:shadow-black/50 transition-all hover:bg-gray-50 dark:hover:bg-gray-800/50",onClick:()=>ve(s),children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(re,{className:"h-8 w-8 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium dark:text-gray-100",children:s.title}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.addressLine1,", ",s.city]}),s.owner&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Owner: ",s.owner.firstName," ",s.owner.lastName]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",onClick:m=>m.stopPropagation(),children:[e.jsxs(G,{variant:"secondary",children:[e.jsx(me,{className:"h-3 w-3 mr-1"}),"Pending"]}),e.jsx(g,{size:"sm",variant:"outline",onClick:()=>ve(s),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50 dark:text-blue-400 dark:hover:text-blue-300 dark:hover:bg-blue-900/20",children:"View Details"}),e.jsx(g,{size:"sm",variant:"outline",onClick:()=>de(s.id,"approved"),className:"text-green-600 hover:text-green-700 hover:bg-green-50",children:e.jsx(Ge,{className:"h-4 w-4"})}),e.jsx(g,{size:"sm",variant:"outline",onClick:()=>de(s.id,"rejected"),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(Ye,{className:"h-4 w-4"})})]})]},s.id)),n.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No pending properties"})]})})]})]}),e.jsxs(X,{value:"properties",className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(s=>e.jsx(js,{property:s,onViewDetails:m=>{B(m),o(!0)}},s.id))}),x.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(re,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No properties found"}),e.jsx("p",{className:"text-gray-600",children:"Properties will appear here once submitted by owners."})]})]}),e.jsx(X,{value:"owner-properties",className:"space-y-4",children:(()=>{const s=x.reduce((L,ee)=>{if(ee.owner){const F=ee.owner.id;L[F]||(L[F]={owner:ee.owner,properties:[]}),L[F].properties.push(ee)}return L},{}),m=Object.values(s);return m.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(J,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No owners found"}),e.jsx("p",{className:"text-gray-600",children:"Property owners will appear here once they submit properties."})]}):e.jsx("div",{className:"space-y-6",children:m.map(({owner:L,properties:ee})=>e.jsxs(u,{children:[e.jsx(S,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(J,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs(C,{className:"text-lg",children:[L.firstName," ",L.lastName]}),e.jsx(R,{children:L.email})]})]}),e.jsxs(G,{variant:"secondary",children:[ee.length," ",ee.length===1?"Property":"Properties"]})]})}),e.jsx(p,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ee.map(F=>{var _e;return e.jsxs(u,{className:"border-l-4 border-l-blue-500 cursor-pointer hover:shadow-lg dark:hover:shadow-xl dark:hover:shadow-black/50 transition-all",onClick:()=>ve(F),children:[e.jsxs(S,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(C,{className:"text-sm font-medium dark:text-card-foreground",children:F.title}),e.jsxs(G,{variant:F.status==="approved"?"default":F.status==="rejected"?"destructive":"secondary",children:[F.status==="pending"&&e.jsx(me,{className:"h-3 w-3 mr-1"}),F.status.charAt(0).toUpperCase()+F.status.slice(1)]})]}),e.jsxs(R,{className:"flex items-center",children:[e.jsx(ke,{className:"h-3 w-3 mr-1"}),F.addressLine1,", ",F.city]})]}),e.jsxs(p,{className:"pt-0",children:[e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),e.jsx("span",{className:"capitalize dark:text-gray-300",children:F.type})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Submitted:"}),e.jsx("span",{className:"dark:text-gray-300",children:new Date(F.createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Photos:"}),e.jsx("span",{className:"dark:text-gray-300",children:((_e=F.photos)==null?void 0:_e.length)||0})]})]}),e.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t dark:border-gray-700",onClick:ds=>ds.stopPropagation(),children:[e.jsx(g,{size:"sm",variant:"outline",onClick:()=>ve(F),className:"flex-1 text-xs",children:"View Details"}),F.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs(g,{size:"sm",onClick:()=>de(F.id,"approved"),className:"flex-1 bg-green-600 hover:bg-green-700 text-xs",children:[e.jsx(Ge,{className:"h-3 w-3 mr-1"}),"Approve"]}),e.jsxs(g,{size:"sm",variant:"destructive",onClick:()=>de(F.id,"rejected"),className:"flex-1 text-xs",children:[e.jsx(Ye,{className:"h-3 w-3 mr-1"}),"Reject"]})]})]})]})]},F.id)})})})]},L.id))})})()}),e.jsx(X,{value:"my-users",className:"space-y-4",children:se?e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"text-lg",children:"Loading users..."})}):e.jsxs("div",{className:"space-y-6",children:[(()=>{const s=q.filter(m=>m.role==="owner");return s.length>0?e.jsxs(u,{children:[e.jsxs(S,{children:[e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-5 w-5"}),"Property Owners (",s.length,")"]}),e.jsx(R,{children:"Owners you have invited to the platform"})]}),e.jsx(p,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(m=>e.jsxs(u,{className:"border-l-4 border-l-green-500",children:[e.jsxs(S,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(C,{className:"text-sm font-medium",children:[m.firstName," ",m.lastName]}),e.jsx(G,{variant:"default",children:"Owner"})]}),e.jsx(R,{children:m.email})]}),e.jsx(p,{className:"pt-0",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Properties:"}),e.jsx("span",{children:m.propertyCount})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Joined:"}),e.jsx("span",{children:new Date(m.createdAt).toLocaleDateString()})]})]})})]},m.id))})})]}):null})(),(()=>{const s=q.filter(m=>m.role==="tenant");return s.length>0?e.jsxs(u,{children:[e.jsxs(S,{children:[e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-5 w-5"}),"Tenants (",s.length,")"]}),e.jsx(R,{children:"Tenants you have invited to the platform"})]}),e.jsx(p,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(m=>e.jsxs(u,{className:"border-l-4 border-l-purple-500",children:[e.jsxs(S,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(C,{className:"text-sm font-medium",children:[m.firstName," ",m.lastName]}),e.jsx(G,{variant:"secondary",children:"Tenant"})]}),e.jsx(R,{children:m.email})]}),e.jsx(p,{className:"pt-0",children:e.jsx("div",{className:"space-y-2 text-sm",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Joined:"}),e.jsx("span",{children:new Date(m.createdAt).toLocaleDateString()})]})})})]},m.id))})})]}):null})(),q.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(J,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No users invited yet"}),e.jsx("p",{className:"text-gray-600",children:"Users you invite will appear here. Use the User Management tab to send invitations."})]})]})}),e.jsx(X,{value:"user-management",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(u,{children:[e.jsxs(S,{children:[e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-5 w-5"}),"Invite Users"]}),e.jsx(R,{children:"Send invitations to property owners and tenants"})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"inviteEmail",children:"Email Address"}),e.jsx(z,{id:"inviteEmail",type:"email",placeholder:"Enter email address",value:f.email,onChange:s=>w(m=>({...m,email:s.target.value})),disabled:T})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"inviteRole",children:"Role"}),e.jsxs(E,{value:f.role,onValueChange:s=>w(m=>({...m,role:s})),disabled:T,children:[e.jsx(D,{children:e.jsx(U,{placeholder:"Select role"})}),e.jsxs(O,{children:[e.jsx(i,{value:"owner",children:"Property Owner"}),e.jsx(i,{value:"tenant",children:"Tenant"})]})]})]}),e.jsxs(g,{onClick:cs,disabled:T||!f.email.trim(),className:"w-full",children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),T?"Sending Invitation...":"Send Invitation"]})]})]}),e.jsxs(u,{children:[e.jsxs(S,{children:[e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-5 w-5"}),"Manage Users"]}),e.jsx(R,{children:"Control user access and permissions"})]}),e.jsxs(p,{children:[se?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-sm text-gray-500",children:"Loading users..."})}):q.length>0?e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:q.map(s=>(console.log(`User ${s.firstName} ${s.lastName} - isActive:`,s.isActive),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`h-8 w-8 rounded-full flex items-center justify-center ${s.role==="owner"?"bg-blue-100":"bg-purple-100"}`,children:e.jsx(J,{className:`h-4 w-4 ${s.role==="owner"?"text-blue-600":"text-purple-600"}`})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-sm",children:[s.firstName," ",s.lastName]}),e.jsx("p",{className:"text-xs text-gray-500",children:s.email}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(G,{variant:s.role==="owner"?"default":"secondary",className:"text-xs",children:s.role}),s.role==="owner"&&e.jsxs("span",{className:"text-xs text-gray-500",children:[s.propertyCount," properties"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[e.jsx("input",{type:"radio",name:`user-${s.id}`,checked:s.isActive,onChange:()=>Be(s.id,!0),className:"text-green-600"}),e.jsx(fs,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-xs text-green-600",children:"Enable"})]})}),e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[e.jsx("input",{type:"radio",name:`user-${s.id}`,checked:!s.isActive,onChange:()=>Be(s.id,!1),className:"text-red-600"}),e.jsx(ys,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-xs text-red-600",children:"Disable"})]})})]})]},s.id)))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(J,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No users found"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Invited users will appear here"})]}),e.jsxs("div",{className:"border-t pt-4 mt-6",children:[e.jsx("h4",{className:"font-medium mb-2 text-sm",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(g,{size:"sm",variant:"outline",onClick:()=>w({email:"",role:"owner"}),disabled:T,className:"text-xs",children:[e.jsx(le,{className:"h-3 w-3 mr-1"}),"Invite Owner"]}),e.jsxs(g,{size:"sm",variant:"outline",onClick:()=>w({email:"",role:"tenant"}),disabled:T,className:"text-xs",children:[e.jsx(le,{className:"h-3 w-3 mr-1"}),"Invite Tenant"]})]})]})]})]})]})}),e.jsx(X,{value:"leads",className:"space-y-4",children:e.jsxs(u,{children:[e.jsxs(S,{children:[e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-5 w-5"}),"Property Leads"]}),e.jsx(R,{children:"Manage tenant inquiries and leads from your properties"})]}),e.jsx(p,{children:b?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Loading leads..."})]}):A.length>0?e.jsx("div",{className:"space-y-4",children:A.map(s=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-lg text-gray-900 dark:text-gray-100",children:s.tenantName}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.tenantEmail," • ",s.tenantPhone]})]}),e.jsx(G,{variant:s.status==="new"?"secondary":s.status==="contacted"||s.status==="qualified"||s.status==="converted"?"default":"outline",className:"text-xs",children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-md p-3 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(re,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:s.propertyTitle})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(ke,{className:"h-3 w-3"}),e.jsxs("span",{children:[s.propertyAddress,", ",s.propertyCity]})]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:[s.propertyType," • Owner: ",s.ownerFirstName," ",s.ownerLastName]})]}),(s.moveInDate||s.monthlyBudget||s.occupants!==void 0||s.hasPets!==void 0)&&e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-md p-3 mb-3",children:[e.jsx("h5",{className:"font-medium text-green-900 dark:text-green-100 mb-2 text-sm",children:"Rental Preferences"}),e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[s.moveInDate&&e.jsxs("div",{className:"text-center",children:[e.jsx(xe,{className:"h-4 w-4 text-green-600 mx-auto mb-1"}),e.jsx("p",{className:"text-xs text-green-600 font-medium",children:"Move-in"}),e.jsx("p",{className:"text-xs text-green-800 dark:text-green-200",children:new Date(s.moveInDate).toLocaleDateString()})]}),s.monthlyBudget&&e.jsxs("div",{className:"text-center",children:[e.jsx(pe,{className:"h-4 w-4 text-green-600 mx-auto mb-1"}),e.jsx("p",{className:"text-xs text-green-600 font-medium",children:"Budget"}),e.jsxs("p",{className:"text-xs text-green-800 dark:text-green-200",children:["$",s.monthlyBudget,"/mo"]})]}),s.occupants!==void 0&&e.jsxs("div",{className:"text-center",children:[e.jsx(J,{className:"h-4 w-4 text-green-600 mx-auto mb-1"}),e.jsx("p",{className:"text-xs text-green-600 font-medium",children:"Occupants"}),e.jsx("p",{className:"text-xs text-green-800 dark:text-green-200",children:s.occupants})]}),s.hasPets!==void 0&&e.jsxs("div",{className:"text-center",children:[e.jsx(ws,{className:"h-4 w-4 text-green-600 mx-auto mb-1"}),e.jsx("p",{className:"text-xs text-green-600 font-medium",children:"Pets"}),e.jsx("p",{className:"text-xs text-green-800 dark:text-green-200",children:s.hasPets?"Yes":"No"})]})]})]}),s.message&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-md p-3 mb-3",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-1",children:"Message:"}),e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:s.message})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:["Submitted: ",new Date(s.createdAt).toLocaleDateString()]}),e.jsxs("span",{children:["Source: ",s.source]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{value:s.status,onValueChange:m=>rs(s.id,m),children:[e.jsx(D,{className:"w-32 h-8",children:e.jsx(U,{})}),e.jsxs(O,{children:[e.jsx(i,{value:"new",children:"New"}),e.jsx(i,{value:"contacted",children:"Contacted"}),e.jsx(i,{value:"qualified",children:"Qualified"}),e.jsx(i,{value:"converted",children:"Converted"}),e.jsx(i,{value:"closed",children:"Closed"})]})]}),e.jsxs(g,{size:"sm",onClick:()=>is(s),className:"bg-orange-500 hover:bg-orange-600 text-white h-8 px-3",children:[e.jsx(le,{className:"h-3 w-3 mr-1"}),"Invite"]})]})]})]},s.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(J,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"No leads yet"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Tenant inquiries from your properties will appear here"})]})})]})}),e.jsx(X,{value:"maintenance",className:"space-y-4",children:e.jsx(ns,{})})]}),e.jsx(us,{property:W,open:$,onOpenChange:o,onApprove:s=>de(s,"approved"),onReject:s=>de(s,"rejected"),showActions:!0}),e.jsx(we,{open:ne,onOpenChange:r,children:e.jsxs(be,{children:[e.jsxs(Se,{children:[e.jsxs(Ce,{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-5 w-5"})," Invite Tenant"]}),e.jsx(Pe,{children:"Send an invitation to this lead to join as a tenant."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"inviteEmailModal",children:"Email Address"}),e.jsx(z,{id:"inviteEmailModal",type:"email",placeholder:"Enter email address",value:l.email,onChange:s=>y(m=>({...m,email:s.target.value})),disabled:T})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"inviteRoleModal",children:"Role"}),e.jsxs(E,{value:l.role,onValueChange:s=>y(m=>({...m,role:s})),disabled:T,children:[e.jsx(D,{children:e.jsx(U,{placeholder:"Select role"})}),e.jsxs(O,{children:[e.jsx(i,{value:"tenant",children:"Tenant"}),e.jsx(i,{value:"owner",children:"Property Owner"})]})]})]})]}),e.jsx(Me,{children:e.jsx(g,{onClick:ls,disabled:T,children:T?"Sending...":"Send Invite"})})]})})]})}function As(){const[a,v]=xs(),[d,P]=c.useState([]),[N,x]=c.useState(!0),[j,n]=c.useState(null),[t,k]=c.useState(""),[I,f]=c.useState(!1),[w,T]=c.useState("all"),[H,q]=c.useState("all"),[ie,se]=c.useState([]);Re();const{toast:M}=ce();c.useEffect(()=>{const o=a.get("status");o&&["all","pending","approved","rejected"].includes(o)?T(o):o||T("all")},[a]);const W=o=>{T(o),o==="all"?v({},{replace:!0}):v({status:o},{replace:!0})};c.useEffect(()=>{B()},[w,H]);const B=async()=>{x(!0);try{const o=await ye.getProperties();console.log("All properties fetched:",o.length),console.log("Properties by status:",o.reduce((b,_)=>(b[_.status]=(b[_.status]||0)+1,b),{}));let A;w==="all"?(A=o,console.log("Showing all properties:",A.length)):(A=o.filter(b=>b.status===w),console.log(`Showing ${w} properties:`,A.length)),H!=="all"&&(A=A.filter(b=>b.ownerId===H),console.log(`Filtered by owner ${H}:`,A.length));const Y=o.filter(b=>b.owner).reduce((b,_)=>(_.owner&&!b.find(ne=>ne.id===_.owner.id)&&b.push({id:_.owner.id,name:`${_.owner.firstName} ${_.owner.lastName}`}),b),[]);se(Y),P(A)}catch(o){console.error("Error fetching properties:",o),M({title:"Error",description:"Failed to load properties",variant:"destructive"})}finally{x(!1)}},$=async(o,A)=>{f(!0);try{await ye.updatePropertyStatus(o,A,t),M({title:"Property Updated",description:`Property has been ${A}`}),P(Y=>Y.filter(b=>b.id!==o)),n(null),k("")}catch{M({title:"Error",description:"Failed to update property status",variant:"destructive"})}finally{f(!1)}};return N?e.jsx("div",{className:"flex justify-center py-8",children:"Loading pending properties..."}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Property Review"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Review and manage property submissions"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(bs,{className:"h-5 w-5 text-gray-500"}),e.jsxs(E,{value:w,onValueChange:W,children:[e.jsx(D,{className:"w-48",children:e.jsx(U,{placeholder:"Filter by status"})}),e.jsxs(O,{children:[e.jsx(i,{value:"pending",children:"Pending Review"}),e.jsx(i,{value:"approved",children:"Approved"}),e.jsx(i,{value:"rejected",children:"Rejected"}),e.jsx(i,{value:"all",children:"All Properties"})]})]})]})}),d.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(me,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:["No ",w==="all"?"":w," properties"]}),e.jsx("p",{className:"text-gray-600",children:w==="pending"?"All properties have been reviewed.":`No properties found with status: ${w}`})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(o=>{var A,Y;return e.jsxs(u,{className:"hover:shadow-lg dark:hover:shadow-xl dark:hover:shadow-black/50 transition-all cursor-pointer overflow-hidden",onClick:()=>n(o),children:[e.jsxs("div",{className:"relative",children:[e.jsx(ps,{photos:o.photos,propertyTitle:o.title,aspectRatio:"video",showControls:!0,showIndicators:!0,className:"h-48"}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsxs(G,{variant:o.status==="approved"?"default":o.status==="rejected"?"destructive":"secondary",children:[o.status==="pending"&&e.jsx(me,{className:"h-3 w-3 mr-1"}),o.status==="approved"&&e.jsx(ue,{className:"h-3 w-3 mr-1"}),o.status==="rejected"&&e.jsx(Ke,{className:"h-3 w-3 mr-1"}),o.status.charAt(0).toUpperCase()+o.status.slice(1)]})})]}),e.jsx(S,{children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{children:[e.jsx(C,{className:"text-lg dark:text-card-foreground",children:o.title}),e.jsxs(R,{className:"flex items-center mt-1",children:[e.jsx(ke,{className:"h-4 w-4 mr-1"}),o.addressLine1,", ",o.city]})]})})}),e.jsx(p,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),e.jsx("span",{className:"capitalize dark:text-gray-300",children:o.type})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Submitted:"}),e.jsx("span",{className:"dark:text-gray-300",children:new Date(o.createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Photos:"}),e.jsxs("span",{className:"dark:text-gray-300",children:[((A=o.photos)==null?void 0:A.length)||0," ",((Y=o.photos)==null?void 0:Y.length)===0&&"(Using placeholders)"]})]}),o.description&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Description:"}),e.jsx("p",{className:"mt-1 text-gray-800 dark:text-gray-300 line-clamp-2",children:o.description})]}),e.jsx("div",{className:"flex gap-2 pt-2",children:e.jsxs(we,{children:[e.jsx(Fe,{asChild:!0,children:e.jsxs(g,{variant:"outline",size:"sm",onClick:b=>{b.stopPropagation(),n(o)},children:[e.jsx(ss,{className:"h-4 w-4 mr-1"}),"Review"]})}),e.jsxs(be,{className:"max-w-2xl",children:[e.jsxs(Se,{children:[e.jsxs(Ce,{children:["Review Property: ",o.title]}),e.jsx(Pe,{children:"Review the property details and approve or reject the submission."})]}),j&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(h,{className:"text-sm font-medium",children:"Property Type"}),e.jsx("p",{className:"capitalize",children:j.type})]}),e.jsxs("div",{children:[e.jsx(h,{className:"text-sm font-medium",children:"Status"}),e.jsx(G,{variant:"secondary",children:j.status})]})]}),e.jsxs("div",{children:[e.jsx(h,{className:"text-sm font-medium",children:"Address"}),e.jsx("p",{children:j.addressLine1}),j.addressLine2&&e.jsx("p",{children:j.addressLine2}),e.jsxs("p",{children:[j.city,", ",j.state," ",j.zipcode]}),e.jsx("p",{children:j.country})]}),j.description&&e.jsxs("div",{children:[e.jsx(h,{className:"text-sm font-medium",children:"Description"}),e.jsx("p",{className:"text-gray-700",children:j.description})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"comment",children:"Review Comment (Optional)"}),e.jsx(Xe,{id:"comment",placeholder:"Add a comment about your decision...",value:t,onChange:b=>k(b.target.value),className:"mt-1"})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsxs(g,{onClick:()=>$(j.id,"approved"),disabled:I,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(ue,{className:"h-4 w-4 mr-2"}),"Approve"]}),e.jsxs(g,{variant:"destructive",onClick:()=>$(j.id,"rejected"),disabled:I,children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Reject"]})]})]})]})]})})]})})]},o.id)})})]})}const fe=[{id:1,name:"John Smith",email:"john.smith@email.com",phone:"(555) 123-4567",property:"Oak Street Apartments",unit:"2B",rent:1850,leaseStart:"2023-09-16",leaseEnd:"2024-12-31",status:"active",paymentStatus:"current"},{id:2,name:"Sarah Johnson",email:"sarah.j@email.com",phone:"(555) 987-6543",property:"Pine View Complex",unit:"1A",rent:1650,leaseStart:"2023-08-01",leaseEnd:"2024-07-31",status:"active",paymentStatus:"overdue"},{id:3,name:"Mike Davis",email:"mike.davis@email.com",phone:"(555) 456-7890",property:"Maple Heights",unit:"3C",rent:2100,leaseStart:"2023-10-01",leaseEnd:"2024-09-30",status:"active",paymentStatus:"current"}];function Ls(){const[a,v]=c.useState(""),[d,P]=c.useState("all"),[N,x]=c.useState("all"),j=fe.filter(t=>{const k=t.name.toLowerCase().includes(a.toLowerCase())||t.email.toLowerCase().includes(a.toLowerCase())||t.property.toLowerCase().includes(a.toLowerCase()),I=d==="all"||t.status===d,f=N==="all"||t.paymentStatus===N;return k&&I&&f}),n=t=>{switch(t){case"current":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"overdue":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"late":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Tenants"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your tenant relationships"})]}),e.jsx(he,{to:"/dashboard/tenants/new",children:e.jsxs(g,{className:"bg-ondo-orange hover:bg-ondo-red transition-colors",children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Add Tenant"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx(u,{children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Tenants"}),e.jsx("p",{className:"text-2xl font-bold",children:fe.length})]}),e.jsx(J,{className:"h-8 w-8 text-blue-500"})]})})}),e.jsx(u,{children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Current Payments"}),e.jsx("p",{className:"text-2xl font-bold",children:fe.filter(t=>t.paymentStatus==="current").length})]}),e.jsx(pe,{className:"h-8 w-8 text-green-500"})]})})}),e.jsx(u,{children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Overdue Payments"}),e.jsx("p",{className:"text-2xl font-bold",children:fe.filter(t=>t.paymentStatus==="overdue").length})]}),e.jsx(es,{className:"h-8 w-8 text-red-500"})]})})}),e.jsx(u,{children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Expiring Leases"}),e.jsx("p",{className:"text-2xl font-bold",children:"2"})]}),e.jsx(xe,{className:"h-8 w-8 text-orange-500"})]})})})]}),e.jsx(u,{className:"mb-6",children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ze,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(z,{placeholder:"Search tenants...",value:a,onChange:t=>v(t.target.value),className:"pl-10"})]}),e.jsxs(E,{value:d,onValueChange:P,children:[e.jsx(D,{className:"w-48",children:e.jsx(U,{placeholder:"All Statuses"})}),e.jsxs(O,{children:[e.jsx(i,{value:"all",children:"All Statuses"}),e.jsx(i,{value:"active",children:"Active"}),e.jsx(i,{value:"pending",children:"Pending"}),e.jsx(i,{value:"terminated",children:"Terminated"})]})]}),e.jsxs(E,{value:N,onValueChange:x,children:[e.jsx(D,{className:"w-48",children:e.jsx(U,{placeholder:"Payment Status"})}),e.jsxs(O,{children:[e.jsx(i,{value:"all",children:"All Payments"}),e.jsx(i,{value:"current",children:"Current"}),e.jsx(i,{value:"overdue",children:"Overdue"}),e.jsx(i,{value:"late",children:"Late"})]})]})]})})}),e.jsx("div",{className:"space-y-4",children:j.map(t=>e.jsx(u,{className:"hover:shadow-lg transition-shadow",children:e.jsxs(p,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(Ie,{className:"h-12 w-12",children:[e.jsx(Ee,{src:`/placeholder-avatar-${t.id}.jpg`}),e.jsx(De,{children:t.name.split(" ").map(k=>k[0]).join("")})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:t.name}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Te,{className:"h-4 w-4"}),e.jsx("span",{children:t.email})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(as,{className:"h-4 w-4"}),e.jsx("span",{children:t.phone})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx(G,{className:n(t.paymentStatus),children:t.paymentStatus}),e.jsx(G,{variant:"outline",className:"ml-2",children:t.status})]}),e.jsx(g,{variant:"outline",size:"sm",children:"View Details"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6 pt-6 border-t",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500 mb-1",children:[e.jsx(ke,{className:"h-4 w-4"}),e.jsx("span",{children:"Property"})]}),e.jsx("p",{className:"font-medium",children:t.property}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Unit ",t.unit]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500 mb-1",children:[e.jsx(pe,{className:"h-4 w-4"}),e.jsx("span",{children:"Monthly Rent"})]}),e.jsxs("p",{className:"font-medium",children:["$",t.rent]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500 mb-1",children:[e.jsx(xe,{className:"h-4 w-4"}),e.jsx("span",{children:"Lease Start"})]}),e.jsx("p",{className:"font-medium",children:t.leaseStart})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500 mb-1",children:[e.jsx(xe,{className:"h-4 w-4"}),e.jsx("span",{children:"Lease End"})]}),e.jsx("p",{className:"font-medium",children:t.leaseEnd})]})]})]})},t.id))}),j.length===0&&e.jsx(u,{children:e.jsxs(p,{className:"text-center py-8",children:[e.jsx(J,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No tenants found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:a||d!=="all"||N!=="all"?"Try adjusting your filters":"No tenants have been added yet"}),e.jsx(he,{to:"/dashboard/tenants/new",children:e.jsxs(g,{className:"bg-ondo-orange hover:bg-ondo-red transition-colors",children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Add First Tenant"]})})]})})]})}function Fs(){const a=Ue(),{toast:v}=ce(),{loading:d,execute:P}=ts(te.invite),[N,x]=c.useState({email:"",role:"tenant"}),j=async n=>{n.preventDefault();try{const t=await P({email:N.email,role:N.role});v({title:"Invitation Sent!",description:`Invitation sent to ${N.email}. They will receive an email with signup instructions.`}),console.log("Invitation URL:",t.inviteUrl),a("/dashboard/tenants")}catch(t){v({title:"Invitation Failed",description:t.message||"Failed to send invitation. Please try again.",variant:"destructive"})}};return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs(u,{children:[e.jsxs(S,{children:[e.jsx(C,{children:"Add New Tenant"}),e.jsx(R,{children:"Invite a tenant to join the platform and access their tenant portal"})]}),e.jsx(p,{children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"email",children:"Email Address *"}),e.jsx(z,{id:"email",type:"email",value:N.email,onChange:n=>x(t=>({...t,email:n.target.value})),placeholder:"tenant@email.com",required:!0}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Invitation will be sent to this email"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"role",children:"Role *"}),e.jsxs(E,{value:N.role,onValueChange:n=>x(t=>({...t,role:n})),required:!0,children:[e.jsx(D,{children:e.jsx(U,{placeholder:"Select role"})}),e.jsxs(O,{children:[e.jsx(i,{value:"tenant",children:"Tenant"}),e.jsx(i,{value:"owner",children:"Property Owner"})]})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"The person will be invited as this role"})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"What happens next?"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"• An invitation email will be sent to the provided address"}),e.jsx("li",{children:"• The recipient will receive a secure signup link"}),e.jsx("li",{children:"• They'll complete their profile (name, phone, password)"}),e.jsx("li",{children:"• Once registered, they'll have access to their portal"})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(he,{to:"/dashboard/tenants",children:e.jsx(g,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(g,{type:"submit",disabled:d,className:"bg-ondo-orange hover:bg-ondo-red transition-colors",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Send Invitation"]})})]})]})})]})})})}function Ms(){return e.jsxs(Oe,{children:[e.jsx(K,{path:"/",element:e.jsx(Ls,{})}),e.jsx(K,{path:"/new",element:e.jsx(Fs,{})})]})}const je=[{id:1,name:"John Doe",email:"john.doe@email.com",phone:"(555) 123-4567",joinDate:"2020-03-15",status:"active",properties:3,totalUnits:28,monthlyRevenue:45200,investmentValue:68e5,lastLogin:"2024-01-20"},{id:2,name:"Sarah Wilson",email:"sarah.wilson@email.com",phone:"(555) 987-6543",joinDate:"2019-08-22",status:"active",properties:2,totalUnits:15,monthlyRevenue:28500,investmentValue:42e5,lastLogin:"2024-01-18"},{id:3,name:"Michael Chen",email:"michael.chen@email.com",phone:"(555) 456-7890",joinDate:"2021-01-10",status:"pending_invitation",properties:0,totalUnits:0,monthlyRevenue:0,investmentValue:0,lastLogin:null}];function Rs(){const[a,v]=c.useState(""),[d,P]=c.useState("all"),N=je.filter(n=>{const t=n.name.toLowerCase().includes(a.toLowerCase())||n.email.toLowerCase().includes(a.toLowerCase()),k=d==="all"||n.status===d;return t&&k}),x=n=>{switch(n){case"active":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"pending_invitation":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"inactive":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},j=n=>{console.log(`Resending invitation to ${n}`)};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Property Owners"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your property owner clients"})]}),e.jsx(he,{to:"/dashboard/owners/new",children:e.jsxs(g,{className:"bg-ondo-orange hover:bg-ondo-red transition-colors",children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Add Owner"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx(u,{children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Owners"}),e.jsx("p",{className:"text-2xl font-bold",children:je.length})]}),e.jsx(J,{className:"h-8 w-8 text-blue-500"})]})})}),e.jsx(u,{children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Owners"}),e.jsx("p",{className:"text-2xl font-bold",children:je.filter(n=>n.status==="active").length})]}),e.jsx(re,{className:"h-8 w-8 text-green-500"})]})})}),e.jsx(u,{children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Invites"}),e.jsx("p",{className:"text-2xl font-bold",children:je.filter(n=>n.status==="pending_invitation").length})]}),e.jsx(Te,{className:"h-8 w-8 text-orange-500"})]})})}),e.jsx(u,{children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Properties"}),e.jsx("p",{className:"text-2xl font-bold",children:je.reduce((n,t)=>n+t.properties,0)})]}),e.jsx(pe,{className:"h-8 w-8 text-purple-500"})]})})})]}),e.jsx(u,{className:"mb-6",children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ze,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(z,{placeholder:"Search owners...",value:a,onChange:n=>v(n.target.value),className:"pl-10"})]}),e.jsxs(E,{value:d,onValueChange:P,children:[e.jsx(D,{className:"w-48",children:e.jsx(U,{placeholder:"All Statuses"})}),e.jsxs(O,{children:[e.jsx(i,{value:"all",children:"All Statuses"}),e.jsx(i,{value:"active",children:"Active"}),e.jsx(i,{value:"pending_invitation",children:"Pending Invitation"}),e.jsx(i,{value:"inactive",children:"Inactive"})]})]})]})})}),e.jsx("div",{className:"space-y-4",children:N.map(n=>e.jsx(u,{className:"hover:shadow-lg transition-shadow",children:e.jsxs(p,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(Ie,{className:"h-12 w-12",children:[e.jsx(Ee,{src:`/placeholder-owner-${n.id}.jpg`}),e.jsx(De,{children:n.name.split(" ").map(t=>t[0]).join("")})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:n.name}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Te,{className:"h-4 w-4"}),e.jsx("span",{children:n.email})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(as,{className:"h-4 w-4"}),e.jsx("span",{children:n.phone})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx(G,{className:x(n.status),children:n.status.replace("_"," ")}),n.status==="pending_invitation"&&e.jsxs(g,{variant:"outline",size:"sm",className:"ml-2 border-ondo-orange text-ondo-orange hover:bg-ondo-orange hover:text-white",onClick:()=>j(n.email),children:[e.jsx(Qe,{className:"h-4 w-4 mr-2"}),"Resend Invite"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(g,{variant:"outline",size:"sm",children:[e.jsx(ss,{className:"h-4 w-4 mr-2"}),"View"]}),e.jsxs(g,{variant:"outline",size:"sm",children:[e.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Edit"]})]})]})]}),n.status==="active"&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6 pt-6 border-t",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500 mb-1",children:[e.jsx(re,{className:"h-4 w-4"}),e.jsx("span",{children:"Properties"})]}),e.jsx("p",{className:"font-medium",children:n.properties}),e.jsxs("p",{className:"text-sm text-gray-500",children:[n.totalUnits," total units"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500 mb-1",children:[e.jsx(pe,{className:"h-4 w-4"}),e.jsx("span",{children:"Monthly Revenue"})]}),e.jsxs("p",{className:"font-medium",children:["$",n.monthlyRevenue.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500 mb-1",children:[e.jsx(re,{className:"h-4 w-4"}),e.jsx("span",{children:"Portfolio Value"})]}),e.jsxs("p",{className:"font-medium",children:["$",(n.investmentValue/1e6).toFixed(1),"M"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500 mb-1",children:[e.jsx(xe,{className:"h-4 w-4"}),e.jsx("span",{children:"Last Login"})]}),e.jsx("p",{className:"font-medium",children:n.lastLogin||"Never"})]})]}),n.status==="pending_invitation"&&e.jsx("div",{className:"mt-6 pt-6 border-t",children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-yellow-800 dark:text-yellow-200",children:"Invitation Pending"}),e.jsxs("p",{className:"text-sm text-yellow-600 dark:text-yellow-300",children:["Owner hasn't accepted the invitation yet. Joined: ",n.joinDate]})]}),e.jsxs(g,{variant:"outline",size:"sm",className:"border-ondo-orange text-ondo-orange hover:bg-ondo-orange hover:text-white",onClick:()=>j(n.email),children:[e.jsx(Qe,{className:"h-4 w-4 mr-2"}),"Resend Invitation"]})]})})]})},n.id))}),N.length===0&&e.jsx(u,{children:e.jsxs(p,{className:"text-center py-8",children:[e.jsx(J,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No owners found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:a||d!=="all"?"Try adjusting your filters":"No property owners have been added yet"}),e.jsx(he,{to:"/dashboard/owners/new",children:e.jsxs(g,{className:"bg-ondo-orange hover:bg-ondo-red transition-colors",children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Add First Owner"]})})]})})]})}function Is(){const a=Ue(),{toast:v}=ce(),{loading:d,execute:P}=ts(te.invite),[N,x]=c.useState({email:"",role:"owner"}),j=async n=>{n.preventDefault();try{const t=await P({email:N.email,role:N.role});v({title:"Invitation Sent!",description:`Invitation sent to ${N.email}. They will receive an email with signup instructions.`}),console.log("Invitation URL:",t.inviteUrl),a("/dashboard/owners")}catch(t){v({title:"Invitation Failed",description:t.message||"Failed to send invitation. Please try again.",variant:"destructive"})}};return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs(u,{children:[e.jsxs(S,{children:[e.jsx(C,{children:"Add New Property Owner"}),e.jsx(R,{children:"Invite a property owner to join your management platform"})]}),e.jsx(p,{children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"email",children:"Email Address *"}),e.jsx(z,{id:"email",type:"email",value:N.email,onChange:n=>x(t=>({...t,email:n.target.value})),placeholder:"owner@email.com",required:!0}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Invitation will be sent to this email"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"role",children:"Role *"}),e.jsxs(E,{value:N.role,onValueChange:n=>x(t=>({...t,role:n})),required:!0,children:[e.jsx(D,{children:e.jsx(U,{placeholder:"Select role"})}),e.jsxs(O,{children:[e.jsx(i,{value:"owner",children:"Property Owner"}),e.jsx(i,{value:"tenant",children:"Tenant"})]})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"The person will be invited as this role"})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"What happens next?"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"• An invitation email will be sent to the provided address"}),e.jsx("li",{children:"• The recipient will receive a secure signup link"}),e.jsx("li",{children:"• They'll complete their profile (name, phone, password)"}),e.jsx("li",{children:"• Once registered, they'll have access to their portal"})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(he,{to:"/dashboard/owners",children:e.jsx(g,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(g,{type:"submit",disabled:d,className:"bg-ondo-orange hover:bg-ondo-red transition-colors",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Send Invitation"]})})]})]})})]})})})}function Es(){return e.jsxs(Oe,{children:[e.jsx(K,{path:"/",element:e.jsx(Rs,{})}),e.jsx(K,{path:"/new",element:e.jsx(Is,{})})]})}function Ds(){return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs(u,{children:[e.jsx(S,{children:e.jsx(C,{children:"Manager Finances"})}),e.jsx(p,{children:e.jsx("p",{children:"Manager Finances component - Coming soon"})})]})})}function Us(){return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs(u,{children:[e.jsx(S,{children:e.jsx(C,{children:"Manager Reports"})}),e.jsx(p,{children:e.jsx("p",{children:"Manager Reports component - Coming soon"})})]})})}function Os(){const[a,v]=c.useState("general"),[d,P]=c.useState({general:{theme:"light",language:"english",timezone:"America/Denver"},notifications:{email:{propertyAlerts:!0,maintenanceRequests:!0,tenantIssues:!0,financialReports:!0,leaseRenewals:!0,ownerCommunications:!0},push:{urgentMaintenance:!0,tenantPayments:!0,leaseExpirations:!1,ownerMessages:!0}},security:{twoFactor:!1,sessionTimeout:"60",loginAlerts:!0},business:{defaultLeaseTerm:"12",maintenanceResponseTime:"24",autoBackup:!0,dataRetention:"7"}}),{toast:N}=ce(),x=(t,k,I)=>{P(f=>({...f,[t]:{...f[t],[k]:{...f[t][k],[I]:!f[t][k][I]}}}))},j=(t,k,I)=>{P(f=>({...f,[t]:{...f[t],[k]:I}}))},n=()=>{N({title:"Settings Saved",description:"Your settings have been updated successfully."})};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Manager Settings"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Configure your account preferences and business settings"})]}),e.jsxs($e,{value:a,onValueChange:v,className:"space-y-6",children:[e.jsxs(Ve,{className:"grid w-full grid-cols-4",children:[e.jsx(Q,{value:"general",children:"General"}),e.jsx(Q,{value:"notifications",children:"Notifications"}),e.jsx(Q,{value:"security",children:"Security"}),e.jsx(Q,{value:"business",children:"Business"})]}),e.jsx(X,{value:"general",className:"space-y-6",children:e.jsxs(u,{children:[e.jsxs(S,{children:[e.jsx(C,{children:"General Settings"}),e.jsx(R,{children:"Configure your general preferences"})]}),e.jsx(p,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Theme"}),e.jsxs(E,{value:d.general.theme,onValueChange:t=>j("general","theme",t),children:[e.jsx(D,{children:e.jsx(U,{})}),e.jsxs(O,{children:[e.jsx(i,{value:"light",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ss,{className:"h-4 w-4 mr-2"}),"Light"]})}),e.jsx(i,{value:"dark",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Cs,{className:"h-4 w-4 mr-2"}),"Dark"]})}),e.jsx(i,{value:"system",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ps,{className:"h-4 w-4 mr-2"}),"System"]})})]})]})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Language"}),e.jsxs(E,{value:d.general.language,onValueChange:t=>j("general","language",t),children:[e.jsx(D,{children:e.jsx(U,{})}),e.jsxs(O,{children:[e.jsx(i,{value:"english",children:"English"}),e.jsx(i,{value:"spanish",children:"Spanish"}),e.jsx(i,{value:"french",children:"French"})]})]})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Timezone"}),e.jsxs(E,{value:d.general.timezone,onValueChange:t=>j("general","timezone",t),children:[e.jsx(D,{children:e.jsx(U,{})}),e.jsxs(O,{children:[e.jsx(i,{value:"America/Denver",children:"Mountain Time (MST)"}),e.jsx(i,{value:"America/New_York",children:"Eastern Time (EST)"}),e.jsx(i,{value:"America/Chicago",children:"Central Time (CST)"}),e.jsx(i,{value:"America/Los_Angeles",children:"Pacific Time (PST)"})]})]})]})]})})]})}),e.jsxs(X,{value:"notifications",className:"space-y-6",children:[e.jsxs(u,{children:[e.jsxs(S,{children:[e.jsx(C,{children:"Email Notifications"}),e.jsx(R,{children:"Choose what emails you'd like to receive"})]}),e.jsx(p,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Property Alerts"}),e.jsx("p",{className:"text-sm text-gray-500",children:"New property listings and updates"})]}),e.jsx(ae,{checked:d.notifications.email.propertyAlerts,onCheckedChange:()=>x("notifications","email","propertyAlerts")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Maintenance Requests"}),e.jsx("p",{className:"text-sm text-gray-500",children:"New maintenance requests from tenants"})]}),e.jsx(ae,{checked:d.notifications.email.maintenanceRequests,onCheckedChange:()=>x("notifications","email","maintenanceRequests")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Tenant Issues"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Urgent tenant-related issues"})]}),e.jsx(ae,{checked:d.notifications.email.tenantIssues,onCheckedChange:()=>x("notifications","email","tenantIssues")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Financial Reports"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Monthly and quarterly financial reports"})]}),e.jsx(ae,{checked:d.notifications.email.financialReports,onCheckedChange:()=>x("notifications","email","financialReports")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Lease Renewals"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Lease renewal reminders and updates"})]}),e.jsx(ae,{checked:d.notifications.email.leaseRenewals,onCheckedChange:()=>x("notifications","email","leaseRenewals")})]})]})})]}),e.jsxs(u,{children:[e.jsxs(S,{children:[e.jsx(C,{children:"Push Notifications"}),e.jsx(R,{children:"Configure push notifications for your devices"})]}),e.jsx(p,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Urgent Maintenance"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Emergency maintenance requests"})]}),e.jsx(ae,{checked:d.notifications.push.urgentMaintenance,onCheckedChange:()=>x("notifications","push","urgentMaintenance")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Tenant Payments"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Payment received notifications"})]}),e.jsx(ae,{checked:d.notifications.push.tenantPayments,onCheckedChange:()=>x("notifications","push","tenantPayments")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Lease Expirations"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Lease expiration warnings"})]}),e.jsx(ae,{checked:d.notifications.push.leaseExpirations,onCheckedChange:()=>x("notifications","push","leaseExpirations")})]})]})})]})]}),e.jsx(X,{value:"security",className:"space-y-6",children:e.jsxs(u,{children:[e.jsxs(S,{children:[e.jsx(C,{children:"Security Settings"}),e.jsx(R,{children:"Manage your account security preferences"})]}),e.jsx(p,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Add an extra layer of security to your account"})]}),e.jsx(ae,{checked:d.security.twoFactor,onCheckedChange:()=>x("security","twoFactor","true")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Login Alerts"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Get notified of new login attempts"})]}),e.jsx(ae,{checked:d.security.loginAlerts,onCheckedChange:()=>x("security","loginAlerts","true")})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Session Timeout (minutes)"}),e.jsxs(E,{value:d.security.sessionTimeout,onValueChange:t=>j("security","sessionTimeout",t),children:[e.jsx(D,{className:"max-w-xs",children:e.jsx(U,{})}),e.jsxs(O,{children:[e.jsx(i,{value:"15",children:"15 minutes"}),e.jsx(i,{value:"30",children:"30 minutes"}),e.jsx(i,{value:"60",children:"1 hour"}),e.jsx(i,{value:"240",children:"4 hours"}),e.jsx(i,{value:"480",children:"8 hours"})]})]})]})]})})]})}),e.jsx(X,{value:"business",className:"space-y-6",children:e.jsxs(u,{children:[e.jsxs(S,{children:[e.jsx(C,{children:"Business Settings"}),e.jsx(R,{children:"Configure your business preferences and defaults"})]}),e.jsxs(p,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Default Lease Term (months)"}),e.jsxs(E,{value:d.business.defaultLeaseTerm,onValueChange:t=>j("business","defaultLeaseTerm",t),children:[e.jsx(D,{children:e.jsx(U,{})}),e.jsxs(O,{children:[e.jsx(i,{value:"6",children:"6 months"}),e.jsx(i,{value:"12",children:"12 months"}),e.jsx(i,{value:"18",children:"18 months"}),e.jsx(i,{value:"24",children:"24 months"})]})]})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Maintenance Response Time (hours)"}),e.jsxs(E,{value:d.business.maintenanceResponseTime,onValueChange:t=>j("business","maintenanceResponseTime",t),children:[e.jsx(D,{children:e.jsx(U,{})}),e.jsxs(O,{children:[e.jsx(i,{value:"4",children:"4 hours"}),e.jsx(i,{value:"12",children:"12 hours"}),e.jsx(i,{value:"24",children:"24 hours"}),e.jsx(i,{value:"48",children:"48 hours"})]})]})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Data Retention (years)"}),e.jsxs(E,{value:d.business.dataRetention,onValueChange:t=>j("business","dataRetention",t),children:[e.jsx(D,{children:e.jsx(U,{})}),e.jsxs(O,{children:[e.jsx(i,{value:"3",children:"3 years"}),e.jsx(i,{value:"5",children:"5 years"}),e.jsx(i,{value:"7",children:"7 years"}),e.jsx(i,{value:"10",children:"10 years"})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Automatic Data Backup"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Automatically backup your data daily"})]}),e.jsx(ae,{checked:d.business.autoBackup,onCheckedChange:()=>x("business","autoBackup","true")})]})]})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(g,{onClick:n,className:"bg-gradient-to-r from-orange-500 to-red-800 hover:from-orange-600 hover:to-red-900",children:[e.jsx(ue,{className:"h-4 w-4 mr-2"}),"Save All Settings"]})})]})]})}function $s(){var ne,r;const{user:a,refreshUser:v}=Re(),{toast:d}=ce(),[P,N]=c.useState(!1),[x,j]=c.useState({firstName:(a==null?void 0:a.firstName)||"",lastName:(a==null?void 0:a.lastName)||"",email:(a==null?void 0:a.email)||"",phone:(a==null?void 0:a.phone)||"",address:(a==null?void 0:a.address)||""}),[n,t]=c.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[k,I]=c.useState(!1),[f,w]=c.useState(!1),[T,H]=c.useState(null),[q,ie]=c.useState(!0),[se,M]=c.useState([]),[W,B]=c.useState(!1);c.useEffect(()=>{console.log("Manager Profile - User data changed:",a),a&&j(l=>({...l,firstName:a.firstName||"",lastName:a.lastName||"",email:a.email||"",phone:a.phone||"",address:a.address||""}))},[a]),c.useEffect(()=>{(async()=>{if(!(!a||a.role!=="manager"))try{ie(!0);const y=await te.getPortfolioStats();H(y)}catch(y){console.error("Error fetching manager portfolio stats:",y),H({propertiesManaged:0,totalUnits:0,activeTenants:0,monthlyRevenue:0,formattedMonthlyRevenue:"$0K",occupancyRate:0})}finally{ie(!1)}})()},[a]),c.useEffect(()=>{(async()=>{if(!(!a||a.role!=="manager"))try{B(!0);const y=await te.getInvitedUsers();M(y)}catch(y){console.error("Error fetching invited users:",y),M([])}finally{B(!1)}})()},[a]);const $=(l,y)=>{j(V=>({...V,[l]:y}))},o=async()=>{if(!x.firstName.trim()||!x.lastName.trim()){d({title:"Error",description:"Please fill in all required fields (First Name, Last Name).",variant:"destructive"});return}w(!0);try{const l=await te.updateProfile({firstName:x.firstName.trim(),lastName:x.lastName.trim(),phone:x.phone.trim()||void 0,address:x.address.trim()||void 0});d({title:"Profile Updated",description:"Your profile information has been saved successfully."}),console.log("About to call refreshUser..."),await v(),console.log("refreshUser completed"),l.user&&(console.log("Updating form data with response:",l.user),j(y=>({...y,firstName:l.user.firstName,lastName:l.user.lastName,email:l.user.email,phone:l.user.phone||"",address:l.user.address||""}))),N(!1)}catch(l){const y=l instanceof oe?l.message:"Failed to update profile. Please try again.";d({title:"Error",description:y,variant:"destructive"})}finally{w(!1)}},A=()=>{j({firstName:(a==null?void 0:a.firstName)||"",lastName:(a==null?void 0:a.lastName)||"",email:(a==null?void 0:a.email)||"",phone:(a==null?void 0:a.phone)||"",address:(a==null?void 0:a.address)||""}),N(!1)},Y=async l=>{try{w(!0);const y=await te.updateProfile({firstName:x.firstName,lastName:x.lastName,phone:x.phone,address:x.address,profilePicture:l});await v(),d({title:"Profile picture updated",description:"Your profile picture has been updated successfully."})}catch(y){console.error("Error updating profile picture:",y),d({title:"Error",description:y.message||"Failed to update profile picture. Please try again.",variant:"destructive"})}finally{w(!1)}},b=(l,y)=>{t(V=>({...V,[l]:y}))},_=async()=>{if(n.newPassword!==n.confirmPassword){d({title:"Error",description:"New passwords do not match.",variant:"destructive"});return}if(n.newPassword.length<8){d({title:"Error",description:"New password must be at least 8 characters long.",variant:"destructive"});return}I(!0);try{await te.changePassword({currentPassword:n.currentPassword,newPassword:n.newPassword}),d({title:"Success",description:"Password changed successfully."}),t({currentPassword:"",newPassword:"",confirmPassword:""})}catch(l){const y=l instanceof oe?l.message:"Failed to change password. Please try again.";d({title:"Error",description:y,variant:"destructive"})}finally{I(!1)}};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Manager Profile"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your account and property management preferences"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx(u,{children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsxs("div",{className:"relative",children:[a!=null&&a.profilePicture?e.jsx(ms,{imageSrc:a.profilePicture,userName:`${a.firstName} ${a.lastName}`}):e.jsxs(Ie,{className:"h-24 w-24",children:[e.jsx(Ee,{src:a==null?void 0:a.profilePicture}),e.jsxs(De,{className:"text-lg",children:[(ne=a==null?void 0:a.firstName)==null?void 0:ne[0],(r=a==null?void 0:a.lastName)==null?void 0:r[0]]})]}),e.jsx(hs,{onCropComplete:Y,trigger:e.jsx(g,{variant:"outline",size:"sm",className:"absolute bottom-0 right-0 rounded-full h-8 w-8 p-0",children:e.jsx(ks,{className:"h-4 w-4"})})})]}),e.jsxs("h3",{className:"font-semibold text-lg mt-4",children:[a==null?void 0:a.firstName," ",a==null?void 0:a.lastName]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Property Manager"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:a==null?void 0:a.email}),e.jsxs("div",{className:"w-full mt-6 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Properties Managed:"}),e.jsx("span",{className:"font-medium",children:q?"...":(T==null?void 0:T.propertiesManaged)||0})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Active Owners:"}),e.jsx("span",{className:"font-medium",children:W||q?"...":se.filter(l=>l.role==="owner"&&l.isActive).length})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Active Tenants:"}),e.jsx("span",{className:"font-medium",children:W||q?"...":se.filter(l=>l.role==="tenant"&&l.isActive).length})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Monthly Revenue:"}),e.jsx("span",{className:"font-medium",children:q?"...":(T==null?void 0:T.formattedMonthlyRevenue)||"$0K"})]})]})]})})})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs($e,{defaultValue:"personal",className:"space-y-6",children:[e.jsxs(Ve,{className:"grid w-full grid-cols-2",children:[e.jsx(Q,{value:"personal",children:"Personal Info"}),e.jsx(Q,{value:"security",children:"Security"})]}),e.jsx(X,{value:"personal",className:"space-y-6",children:e.jsxs(u,{children:[e.jsxs(S,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(C,{children:"Personal Information"}),e.jsx(R,{children:"Update your personal details"})]}),P?e.jsxs("div",{className:"space-x-2",children:[e.jsx(g,{variant:"outline",size:"sm",onClick:A,disabled:f,children:"Cancel"}),e.jsx(g,{size:"sm",onClick:o,disabled:f,children:f?"Saving...":"Save"})]}):e.jsx(g,{onClick:()=>N(!0),children:"Edit"})]}),e.jsxs(p,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"firstName",children:"First Name"}),e.jsx(z,{id:"firstName",value:x.firstName,onChange:l=>$("firstName",l.target.value),disabled:!P||f})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"lastName",children:"Last Name"}),e.jsx(z,{id:"lastName",value:x.lastName,onChange:l=>$("lastName",l.target.value),disabled:!P||f})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"email",children:"Email Address"}),e.jsx(z,{id:"email",type:"email",value:x.email,disabled:!0,className:"bg-gray-50 text-gray-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"phone",children:"Phone Number"}),e.jsx(z,{id:"phone",value:x.phone,onChange:l=>$("phone",l.target.value),disabled:!P||f,placeholder:"Enter phone number"})]})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"address",children:"Address"}),e.jsx(z,{id:"address",value:x.address,onChange:l=>$("address",l.target.value),disabled:!P||f,placeholder:"Enter your address"})]})]})]})}),e.jsx(X,{value:"security",className:"space-y-6",children:e.jsxs(u,{children:[e.jsxs(S,{children:[e.jsx(C,{children:"Security Settings"}),e.jsx(R,{children:"Manage your account security"})]}),e.jsx(p,{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-4",children:"Change Password"}),e.jsxs("div",{className:"space-y-4 max-w-md",children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"currentPassword",children:"Current Password"}),e.jsx(z,{id:"currentPassword",type:"password",value:n.currentPassword,onChange:l=>b("currentPassword",l.target.value),disabled:k})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"newPassword",children:"New Password"}),e.jsx(z,{id:"newPassword",type:"password",value:n.newPassword,onChange:l=>b("newPassword",l.target.value),disabled:k})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsx(z,{id:"confirmPassword",type:"password",value:n.confirmPassword,onChange:l=>b("confirmPassword",l.target.value),disabled:k})]}),e.jsx(g,{onClick:_,disabled:k||!n.currentPassword||!n.newPassword||!n.confirmPassword,children:k?"Updating...":"Update Password"})]})]})})]})})]})})]})]})}function Ys(){return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsx(c.Suspense,{fallback:e.jsx(os,{}),children:e.jsxs(Oe,{children:[e.jsx(K,{path:"/",element:e.jsx(Ts,{})}),e.jsx(K,{path:"/properties/*",element:e.jsx(As,{})}),e.jsx(K,{path:"/owners/*",element:e.jsx(Es,{})}),e.jsx(K,{path:"/tenants/*",element:e.jsx(Ms,{})}),e.jsx(K,{path:"/maintenance/*",element:e.jsx(ns,{})}),e.jsx(K,{path:"/finances/*",element:e.jsx(Ds,{})}),e.jsx(K,{path:"/reports",element:e.jsx(Us,{})}),e.jsx(K,{path:"/profile",element:e.jsx($s,{})}),e.jsx(K,{path:"/settings",element:e.jsx(Os,{})})]})})})}export{Ys as default};
